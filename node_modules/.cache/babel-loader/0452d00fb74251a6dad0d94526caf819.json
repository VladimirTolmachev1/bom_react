{"ast":null,"code":"import _defineProperty from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nimport { combineReducers } from 'redux';\nimport { CHECKOUT__BULK_SAVE, CHECKOUT__CREATE_NEW_ITEM, CHECKOUT__INCREASE_ITEM_AMOUNT, CHECKOUT__REMOVE_ITEM, CHECKOUT__CLEAR, CREATE_CHARGE_REQUEST, CREATE_CHARGE_SUCCESS, CREATE_CHARGE_ERROR, CHECKOUT__RESTORE_FROM_STORAGE, CHECKOUT__SET_UI, CHECKOUT__UPDATE_ITEM } from './checkout.types';\nvar initialState = {\n  itemsByUuids: {},\n  allUuids: [],\n  uuidsByItemDecriptors: {},\n  charge: {\n    stripeTransactionId: null,\n    isLoading: false\n  },\n  ui: {\n    activeStep: 0\n  }\n};\nexport function ui() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.ui;\n\n  var _ref = arguments.length > 1 ? arguments[1] : undefined,\n      type = _ref.type,\n      payload = _ref.payload;\n\n  switch (type) {\n    case CHECKOUT__SET_UI:\n      {\n        return _objectSpread({}, state, payload);\n      }\n\n    default:\n      return state;\n  }\n}\n\nvar removeDescriptorByUuid = function removeDescriptorByUuid(uuidsByDescriptors, uuid) {\n  var toDelete = Object.keys(uuidsByDescriptors).find(function (descriptor) {\n    return uuidsByDescriptors[descriptor] === uuid;\n  });\n\n  var removed = uuidsByDescriptors[toDelete],\n      withourRemover = _objectWithoutProperties(uuidsByDescriptors, [toDelete]);\n\n  return withourRemover;\n};\n\nfunction allUuids() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.allUuids;\n\n  var _ref2 = arguments.length > 1 ? arguments[1] : undefined,\n      type = _ref2.type,\n      payload = _ref2.payload;\n\n  switch (type) {\n    case CHECKOUT__CREATE_NEW_ITEM:\n      {\n        return _toConsumableArray(state).concat([payload.uuid]);\n      }\n\n    case CHECKOUT__REMOVE_ITEM:\n      {\n        return state.filter(function (id) {\n          return id !== payload;\n        });\n      }\n\n    case CHECKOUT__CLEAR:\n      {\n        return initialState.allUuids;\n      }\n\n    case CHECKOUT__BULK_SAVE:\n    case CHECKOUT__RESTORE_FROM_STORAGE:\n      {\n        return payload.allUuids;\n      }\n\n    default:\n      return state;\n  }\n}\n\nfunction itemsByUuids() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.itemsByUuids;\n\n  var _ref3 = arguments.length > 1 ? arguments[1] : undefined,\n      type = _ref3.type,\n      payload = _ref3.payload;\n\n  switch (type) {\n    case CHECKOUT__CREATE_NEW_ITEM:\n      {\n        return _objectSpread({}, state, _defineProperty({}, payload.uuid, payload));\n      }\n\n    case CHECKOUT__UPDATE_ITEM:\n      {\n        return _objectSpread({}, state, _defineProperty({}, payload.uuid, payload));\n      }\n\n    case CHECKOUT__REMOVE_ITEM:\n      {\n        var removedItem = state[payload],\n            newState = _objectWithoutProperties(state, [payload]);\n\n        return newState;\n      }\n\n    case CHECKOUT__INCREASE_ITEM_AMOUNT:\n      {\n        return _objectSpread({}, state, _defineProperty({}, payload.uuid, _objectSpread({}, state[payload.uuid], {\n          amount: state[payload.uuid].amount + payload.amountToAdd\n        })));\n      }\n\n    case CHECKOUT__CLEAR:\n      {\n        return initialState.itemsByUuids;\n      }\n\n    case CHECKOUT__BULK_SAVE:\n    case CHECKOUT__RESTORE_FROM_STORAGE:\n      {\n        return payload.itemsByUuids;\n      }\n\n    default:\n      return state;\n  }\n}\n\nfunction uuidsByItemDecriptors() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.uuidsByItemDecriptors;\n\n  var _ref4 = arguments.length > 1 ? arguments[1] : undefined,\n      type = _ref4.type,\n      payload = _ref4.payload;\n\n  switch (type) {\n    case CHECKOUT__CREATE_NEW_ITEM:\n      {\n        return _objectSpread({}, state, _defineProperty({}, payload.descriptor, payload.uuid));\n      }\n\n    case CHECKOUT__REMOVE_ITEM:\n      {\n        return removeDescriptorByUuid(state, payload);\n      }\n\n    case CHECKOUT__CLEAR:\n      {\n        return initialState.uuidsByItemDecriptors;\n      }\n\n    case CHECKOUT__BULK_SAVE:\n    case CHECKOUT__RESTORE_FROM_STORAGE:\n      {\n        return payload.uuidsByItemDecriptors;\n      }\n\n    default:\n      return state;\n  }\n}\n\nfunction charge() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.charge;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case CREATE_CHARGE_SUCCESS:\n      {\n        return _objectSpread({}, state, {\n          isLoading: false,\n          stripeTransactionId: action.response.transaction_id\n        });\n      }\n\n    case CREATE_CHARGE_REQUEST:\n      {\n        return _objectSpread({}, state, {\n          isLoading: true\n        });\n      }\n\n    case CREATE_CHARGE_ERROR:\n      {\n        return _objectSpread({}, state, {\n          isLoading: false\n        });\n      }\n\n    default:\n      return state;\n  }\n}\n\nexport var checkoutReducer = combineReducers({\n  itemsByUuids: itemsByUuids,\n  uuidsByItemDecriptors: uuidsByItemDecriptors,\n  allUuids: allUuids,\n  charge: charge,\n  ui: ui\n});\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(initialState, \"initialState\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/checkout/checkout.reducer.js\");\n  reactHotLoader.register(ui, \"ui\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/checkout/checkout.reducer.js\");\n  reactHotLoader.register(removeDescriptorByUuid, \"removeDescriptorByUuid\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/checkout/checkout.reducer.js\");\n  reactHotLoader.register(allUuids, \"allUuids\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/checkout/checkout.reducer.js\");\n  reactHotLoader.register(itemsByUuids, \"itemsByUuids\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/checkout/checkout.reducer.js\");\n  reactHotLoader.register(uuidsByItemDecriptors, \"uuidsByItemDecriptors\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/checkout/checkout.reducer.js\");\n  reactHotLoader.register(charge, \"charge\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/checkout/checkout.reducer.js\");\n  reactHotLoader.register(checkoutReducer, \"checkoutReducer\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/checkout/checkout.reducer.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/checkout/checkout.reducer.js"],"names":["combineReducers","CHECKOUT__BULK_SAVE","CHECKOUT__CREATE_NEW_ITEM","CHECKOUT__INCREASE_ITEM_AMOUNT","CHECKOUT__REMOVE_ITEM","CHECKOUT__CLEAR","CREATE_CHARGE_REQUEST","CREATE_CHARGE_SUCCESS","CREATE_CHARGE_ERROR","CHECKOUT__RESTORE_FROM_STORAGE","CHECKOUT__SET_UI","CHECKOUT__UPDATE_ITEM","initialState","itemsByUuids","allUuids","uuidsByItemDecriptors","charge","stripeTransactionId","isLoading","ui","activeStep","state","type","payload","removeDescriptorByUuid","uuidsByDescriptors","uuid","toDelete","Object","keys","find","descriptor","removed","withourRemover","filter","id","removedItem","newState","amount","amountToAdd","action","response","transaction_id","checkoutReducer"],"mappings":"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","sourcesContent":["import { combineReducers } from 'redux';\n\nimport {\n  CHECKOUT__BULK_SAVE,\n  CHECKOUT__CREATE_NEW_ITEM,\n  CHECKOUT__INCREASE_ITEM_AMOUNT,\n  CHECKOUT__REMOVE_ITEM,\n  CHECKOUT__CLEAR,\n  CREATE_CHARGE_REQUEST,\n  CREATE_CHARGE_SUCCESS,\n  CREATE_CHARGE_ERROR,\n  CHECKOUT__RESTORE_FROM_STORAGE,\n  CHECKOUT__SET_UI,\n  CHECKOUT__UPDATE_ITEM,\n} from './checkout.types';\n\nconst initialState = {\n  itemsByUuids: {},\n  allUuids: [],\n  uuidsByItemDecriptors: {},\n  charge: {\n    stripeTransactionId: null,\n    isLoading: false,\n  },\n  ui: {\n    activeStep: 0,\n  },\n};\n\nexport function ui(state = initialState.ui, { type, payload }) {\n  switch (type) {\n    case CHECKOUT__SET_UI: {\n      return {\n        ...state,\n        ...payload,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nconst removeDescriptorByUuid = (uuidsByDescriptors, uuid) => {\n  const toDelete = Object.keys(uuidsByDescriptors).find(\n    descriptor => uuidsByDescriptors[descriptor] === uuid,\n  );\n\n  const { [toDelete]: removed, ...withourRemover } = uuidsByDescriptors;\n\n  return withourRemover;\n};\n\nfunction allUuids(state = initialState.allUuids, { type, payload }) {\n  switch (type) {\n    case CHECKOUT__CREATE_NEW_ITEM: {\n      return [...state, payload.uuid];\n    }\n\n    case CHECKOUT__REMOVE_ITEM: {\n      return state.filter(id => id !== payload);\n    }\n\n    case CHECKOUT__CLEAR: {\n      return initialState.allUuids;\n    }\n\n    case CHECKOUT__BULK_SAVE:\n    case CHECKOUT__RESTORE_FROM_STORAGE: {\n      return payload.allUuids;\n    }\n\n    default:\n      return state;\n  }\n}\n\nfunction itemsByUuids(state = initialState.itemsByUuids, { type, payload }) {\n  switch (type) {\n    case CHECKOUT__CREATE_NEW_ITEM: {\n      return {\n        ...state,\n        [payload.uuid]: payload,\n      };\n    }\n\n    case CHECKOUT__UPDATE_ITEM: {\n      return {\n        ...state,\n        [payload.uuid]: payload,\n      };\n    }\n\n    case CHECKOUT__REMOVE_ITEM: {\n      const { [payload]: removedItem, ...newState } = state;\n      return newState;\n    }\n\n    case CHECKOUT__INCREASE_ITEM_AMOUNT: {\n      return {\n        ...state,\n        [payload.uuid]: {\n          ...state[payload.uuid],\n          amount: state[payload.uuid].amount + payload.amountToAdd,\n        },\n      };\n    }\n\n    case CHECKOUT__CLEAR: {\n      return initialState.itemsByUuids;\n    }\n\n    case CHECKOUT__BULK_SAVE:\n    case CHECKOUT__RESTORE_FROM_STORAGE: {\n      return payload.itemsByUuids;\n    }\n\n    default:\n      return state;\n  }\n}\n\nfunction uuidsByItemDecriptors(\n  state = initialState.uuidsByItemDecriptors,\n  { type, payload },\n) {\n  switch (type) {\n    case CHECKOUT__CREATE_NEW_ITEM: {\n      return {\n        ...state,\n        [payload.descriptor]: payload.uuid,\n      };\n    }\n\n    case CHECKOUT__REMOVE_ITEM: {\n      return removeDescriptorByUuid(state, payload);\n    }\n\n    case CHECKOUT__CLEAR: {\n      return initialState.uuidsByItemDecriptors;\n    }\n\n    case CHECKOUT__BULK_SAVE:\n    case CHECKOUT__RESTORE_FROM_STORAGE: {\n      return payload.uuidsByItemDecriptors;\n    }\n\n    default:\n      return state;\n  }\n}\n\nfunction charge(state = initialState.charge, action) {\n  switch (action.type) {\n    case CREATE_CHARGE_SUCCESS: {\n      return {\n        ...state,\n        isLoading: false,\n        stripeTransactionId: action.response.transaction_id,\n      };\n    }\n    case CREATE_CHARGE_REQUEST: {\n      return {\n        ...state,\n        isLoading: true,\n      };\n    }\n\n    case CREATE_CHARGE_ERROR: {\n      return {\n        ...state,\n        isLoading: false,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n\nexport const checkoutReducer = combineReducers({\n  itemsByUuids,\n  uuidsByItemDecriptors,\n  allUuids,\n  charge,\n  ui,\n});\n"]},"metadata":{},"sourceType":"module"}