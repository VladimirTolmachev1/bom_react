{"ast":null,"code":"import _objectWithoutProperties from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _applyDecoratedDescriptor from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\n\nvar _dec,\n    _dec2,\n    _class,\n    _class2,\n    _jsxFileName = \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/ZipCodeAutoComplete/ZipCodeAutoComplete.js\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { autobind } from 'core-decorators';\nimport { withStyles } from '@material-ui/core';\nimport { AppCleanHOC, AppAutoComplete } from '../../components';\nimport { HelperService } from '../../services';\nimport styles from './styles';\nimport { zipcodesFiltersSelector, zipcodesListSelector, zipcodesLoadingSelector, updateFilters, abortPageRequests, getZipcodesForAutocomplete, zipcodesCountSelector, setPage, clearAutocomplete } from './modules';\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    zipcodes: zipcodesListSelector(state),\n    filters: zipcodesFiltersSelector(state),\n    loading: zipcodesLoadingSelector(state),\n    count: zipcodesCountSelector(state)\n  };\n};\n\nvar mapDispatchToProps = {\n  getZipcodesForAutocomplete: getZipcodesForAutocomplete,\n  updateFilters: updateFilters,\n  abortPageRequests: abortPageRequests,\n  setPage: setPage,\n  clearAutocomplete: clearAutocomplete\n};\nvar ZipCodeAutocomplete = (_dec = withStyles(styles), _dec2 = connect(mapStateToProps, mapDispatchToProps), _dec(_class = _dec2(_class = AppCleanHOC(_class = (_class2 =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(ZipCodeAutocomplete, _PureComponent);\n\n  function ZipCodeAutocomplete() {\n    _classCallCheck(this, ZipCodeAutocomplete);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ZipCodeAutocomplete).apply(this, arguments));\n  }\n\n  _createClass(ZipCodeAutocomplete, [{\n    key: \"makeRequest\",\n    value: function makeRequest(rest) {\n      var _this$props = this.props,\n          getZipcodesForAutocomplete = _this$props.getZipcodesForAutocomplete,\n          updateFilters = _this$props.updateFilters,\n          filters = _this$props.filters;\n\n      var body = _objectSpread({}, filters, rest);\n\n      updateFilters(body);\n      getZipcodesForAutocomplete({\n        body: body\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var clearAutocomplete = this.props.clearAutocomplete;\n      clearAutocomplete();\n    }\n  }, {\n    key: \"onInputChange\",\n    value: function onInputChange(search) {\n      if (search.length <= 5) {\n        this.makeRequest({\n          search: search\n        });\n      }\n    }\n  }, {\n    key: \"onMenuScrollToBottom\",\n    value: function onMenuScrollToBottom() {\n      var _this$props2 = this.props,\n          setPage = _this$props2.setPage,\n          page = _this$props2.filters.page,\n          getZipcodesForAutocomplete = _this$props2.getZipcodesForAutocomplete;\n      var body = {\n        page: page + 1\n      };\n      setPage(page + 1);\n      getZipcodesForAutocomplete({\n        body: body\n      });\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(option) {\n      var _this$props3 = this.props,\n          onChange = _this$props3.onChange,\n          zipcodes = _this$props3.zipcodes;\n      var value = option ? option.value : '';\n      var zipcode = zipcodes.find(function (zipcode) {\n        return zipcode.value === value;\n      }) || {\n        label: '',\n        value: ''\n      };\n      onChange(zipcode);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.makeRequest();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          zipcodes = _this$props4.zipcodes,\n          classes = _this$props4.classes,\n          wrapperClassName = _this$props4.wrapperClassName,\n          rest = _objectWithoutProperties(_this$props4, [\"zipcodes\", \"classes\", \"wrapperClassName\"]);\n\n      return React.createElement(\"div\", {\n        className: \"\".concat(classes.zipcodeAutocompleteWrapper, \" \").concat(wrapperClassName),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(AppAutoComplete, Object.assign({}, HelperService.pick(this.props, ['loading', 'compareKey', 'placeholder', 'selectedOption', 'withPagination', 'value', 'count']), {\n        isSearchable: true,\n        isCreatable: false,\n        onMenuScrollToBottom: this.onMenuScrollToBottom,\n        onInputChange: this.onInputChange,\n        options: zipcodes,\n        className: \"zipcode-autocomplete\",\n        onChange: this.onChange\n      }, rest, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return ZipCodeAutocomplete;\n}(PureComponent), (_applyDecoratedDescriptor(_class2.prototype, \"onInputChange\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onInputChange\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"onMenuScrollToBottom\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onMenuScrollToBottom\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"onChange\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onChange\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"componentDidMount\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"componentDidMount\"), _class2.prototype)), _class2)) || _class) || _class) || _class);\nexport { ZipCodeAutocomplete as default };\nZipCodeAutocomplete.propTypes = {\n  zipcodes: PropTypes.array,\n  loading: PropTypes.bool,\n  compareKey: PropTypes.string,\n  onChange: PropTypes.func,\n  theme: PropTypes.object,\n  wrapperClasses: PropTypes.string,\n  placeholder: PropTypes.string\n};\nZipCodeAutocomplete.defaultProps = {\n  placeholder: 'Select zip code',\n  compareKey: 'label',\n  wrapperClassName: ''\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/ZipCodeAutoComplete/ZipCodeAutoComplete.js\");\n  reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/ZipCodeAutoComplete/ZipCodeAutoComplete.js\");\n  reactHotLoader.register(ZipCodeAutocomplete, \"ZipCodeAutocomplete\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/ZipCodeAutoComplete/ZipCodeAutoComplete.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/ZipCodeAutoComplete/ZipCodeAutoComplete.js"],"names":["React","PureComponent","PropTypes","connect","autobind","withStyles","AppCleanHOC","AppAutoComplete","HelperService","styles","zipcodesFiltersSelector","zipcodesListSelector","zipcodesLoadingSelector","updateFilters","abortPageRequests","getZipcodesForAutocomplete","zipcodesCountSelector","setPage","clearAutocomplete","mapStateToProps","state","zipcodes","filters","loading","count","mapDispatchToProps","ZipCodeAutocomplete","rest","props","body","search","length","makeRequest","page","option","onChange","value","zipcode","find","label","classes","wrapperClassName","zipcodeAutocompleteWrapper","pick","onMenuScrollToBottom","onInputChange","propTypes","array","bool","compareKey","string","func","theme","object","wrapperClasses","placeholder","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,QAAT,QAAyB,iBAAzB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,WAAT,EAAsBC,eAAtB,QAA6C,kBAA7C;AACA,SAASC,aAAT,QAA8B,gBAA9B;AAEA,OAAOC,MAAP,MAAmB,UAAnB;AAEA,SACEC,uBADF,EAEEC,oBAFF,EAGEC,uBAHF,EAIEC,aAJF,EAKEC,iBALF,EAMEC,0BANF,EAOEC,qBAPF,EAQEC,OARF,EASEC,iBATF,QAUO,WAVP;;AAYA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK;AAAA,SAAK;AAChCC,IAAAA,QAAQ,EAAEV,oBAAoB,CAACS,KAAD,CADE;AAEhCE,IAAAA,OAAO,EAAEZ,uBAAuB,CAACU,KAAD,CAFA;AAGhCG,IAAAA,OAAO,EAAEX,uBAAuB,CAACQ,KAAD,CAHA;AAIhCI,IAAAA,KAAK,EAAER,qBAAqB,CAACI,KAAD;AAJI,GAAL;AAAA,CAA7B;;AAOA,IAAMK,kBAAkB,GAAG;AACzBV,EAAAA,0BAA0B,EAA1BA,0BADyB;AAEzBF,EAAAA,aAAa,EAAbA,aAFyB;AAGzBC,EAAAA,iBAAiB,EAAjBA,iBAHyB;AAIzBG,EAAAA,OAAO,EAAPA,OAJyB;AAKzBC,EAAAA,iBAAiB,EAAjBA;AALyB,CAA3B;IAeMQ,mB,WANLrB,UAAU,CAACI,MAAD,C,UACVN,OAAO,CACNgB,eADM,EAENM,kBAFM,C,+BAIPnB,W;;;;;;;;;;;;;gCAEaqB,I,EAAM;AAAA,wBAC+C,KAAKC,KADpD;AAAA,UACRb,0BADQ,eACRA,0BADQ;AAAA,UACoBF,aADpB,eACoBA,aADpB;AAAA,UACmCS,OADnC,eACmCA,OADnC;;AAGhB,UAAMO,IAAI,qBAAQP,OAAR,EAAoBK,IAApB,CAAV;;AACAd,MAAAA,aAAa,CAACgB,IAAD,CAAb;AACAd,MAAAA,0BAA0B,CAAC;AAAEc,QAAAA,IAAI,EAAJA;AAAF,OAAD,CAA1B;AACD;;;2CAEsB;AAAA,UACbX,iBADa,GACS,KAAKU,KADd,CACbV,iBADa;AAErBA,MAAAA,iBAAiB;AAClB;;;kCAGaY,M,EAAQ;AACpB,UAAIA,MAAM,CAACC,MAAP,IAAiB,CAArB,EAAwB;AACtB,aAAKC,WAAL,CAAiB;AAAEF,UAAAA,MAAM,EAANA;AAAF,SAAjB;AACD;AACF;;;2CAGsB;AAAA,yBAKjB,KAAKF,KALY;AAAA,UAEnBX,OAFmB,gBAEnBA,OAFmB;AAAA,UAGRgB,IAHQ,gBAGnBX,OAHmB,CAGRW,IAHQ;AAAA,UAInBlB,0BAJmB,gBAInBA,0BAJmB;AAMrB,UAAMc,IAAI,GAAG;AAAEI,QAAAA,IAAI,EAAEA,IAAI,GAAG;AAAf,OAAb;AAEAhB,MAAAA,OAAO,CAACgB,IAAI,GAAG,CAAR,CAAP;AACAlB,MAAAA,0BAA0B,CAAC;AAAEc,QAAAA,IAAI,EAAJA;AAAF,OAAD,CAA1B;AACD;;;6BAGQK,M,EAAQ;AAAA,yBACgB,KAAKN,KADrB;AAAA,UACPO,QADO,gBACPA,QADO;AAAA,UACGd,QADH,gBACGA,QADH;AAEf,UAAMe,KAAK,GAAGF,MAAM,GAAGA,MAAM,CAACE,KAAV,GAAkB,EAAtC;AACA,UAAMC,OAAO,GAAGhB,QAAQ,CAACiB,IAAT,CAAc,UAAAD,OAAO;AAAA,eAAIA,OAAO,CAACD,KAAR,KAAkBA,KAAtB;AAAA,OAArB,KAAqD;AACnEG,QAAAA,KAAK,EAAE,EAD4D;AAEnEH,QAAAA,KAAK,EAAE;AAF4D,OAArE;AAIAD,MAAAA,QAAQ,CAACE,OAAD,CAAR;AACD;;;wCAGmB;AAClB,WAAKL,WAAL;AACD;;;6BAEQ;AAAA,yBACkD,KAAKJ,KADvD;AAAA,UACCP,QADD,gBACCA,QADD;AAAA,UACWmB,OADX,gBACWA,OADX;AAAA,UACoBC,gBADpB,gBACoBA,gBADpB;AAAA,UACyCd,IADzC;;AAGP,aACE;AACE,QAAA,SAAS,YAAKa,OAAO,CAACE,0BAAb,cAA2CD,gBAA3C,CADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEE,oBAAC,eAAD,oBACMjC,aAAa,CAACmC,IAAd,CAAmB,KAAKf,KAAxB,EAA+B,CACjC,SADiC,EAEjC,YAFiC,EAGjC,aAHiC,EAIjC,gBAJiC,EAKjC,gBALiC,EAMjC,OANiC,EAOjC,OAPiC,CAA/B,CADN;AAUE,QAAA,YAAY,MAVd;AAWE,QAAA,WAAW,EAAE,KAXf;AAYE,QAAA,oBAAoB,EAAE,KAAKgB,oBAZ7B;AAaE,QAAA,aAAa,EAAE,KAAKC,aAbtB;AAcE,QAAA,OAAO,EAAExB,QAdX;AAeE,QAAA,SAAS,EAAC,sBAfZ;AAgBE,QAAA,QAAQ,EAAE,KAAKc;AAhBjB,SAiBMR,IAjBN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAFF,CADF;AAwBD;;;;;;;;;;;EA7E+B1B,a,mEAc/BG,Q,kKAOAA,Q,6JAaAA,Q,0JAWAA,Q;SA7CGsB,mB;AAgFNA,mBAAmB,CAACoB,SAApB,GAAgC;AAC9BzB,EAAAA,QAAQ,EAAEnB,SAAS,CAAC6C,KADU;AAE9BxB,EAAAA,OAAO,EAAErB,SAAS,CAAC8C,IAFW;AAG9BC,EAAAA,UAAU,EAAE/C,SAAS,CAACgD,MAHQ;AAI9Bf,EAAAA,QAAQ,EAAEjC,SAAS,CAACiD,IAJU;AAK9BC,EAAAA,KAAK,EAAElD,SAAS,CAACmD,MALa;AAM9BC,EAAAA,cAAc,EAAEpD,SAAS,CAACgD,MANI;AAO9BK,EAAAA,WAAW,EAAErD,SAAS,CAACgD;AAPO,CAAhC;AAUAxB,mBAAmB,CAAC8B,YAApB,GAAmC;AACjCD,EAAAA,WAAW,EAAE,iBADoB;AAEjCN,EAAAA,UAAU,EAAE,OAFqB;AAGjCR,EAAAA,gBAAgB,EAAE;AAHe,CAAnC;;;;;;;;;;0BAhHMtB,e;0BAOAM,kB;0BAeAC,mB","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { autobind } from 'core-decorators';\nimport { withStyles } from '@material-ui/core';\nimport { AppCleanHOC, AppAutoComplete } from '../../components';\nimport { HelperService } from '../../services';\n\nimport styles from './styles';\n\nimport {\n  zipcodesFiltersSelector,\n  zipcodesListSelector,\n  zipcodesLoadingSelector,\n  updateFilters,\n  abortPageRequests,\n  getZipcodesForAutocomplete,\n  zipcodesCountSelector,\n  setPage,\n  clearAutocomplete,\n} from './modules';\n\nconst mapStateToProps = state => ({\n  zipcodes: zipcodesListSelector(state),\n  filters: zipcodesFiltersSelector(state),\n  loading: zipcodesLoadingSelector(state),\n  count: zipcodesCountSelector(state),\n});\n\nconst mapDispatchToProps = {\n  getZipcodesForAutocomplete,\n  updateFilters,\n  abortPageRequests,\n  setPage,\n  clearAutocomplete,\n};\n\nexport default\n@withStyles(styles)\n@connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)\n@AppCleanHOC\nclass ZipCodeAutocomplete extends PureComponent {\n  makeRequest(rest) {\n    const { getZipcodesForAutocomplete, updateFilters, filters } = this.props;\n\n    const body = { ...filters, ...rest };\n    updateFilters(body);\n    getZipcodesForAutocomplete({ body });\n  }\n\n  componentWillUnmount() {\n    const { clearAutocomplete } = this.props;\n    clearAutocomplete();\n  }\n\n  @autobind\n  onInputChange(search) {\n    if (search.length <= 5) {\n      this.makeRequest({ search });\n    }\n  }\n\n  @autobind\n  onMenuScrollToBottom() {\n    const {\n      setPage,\n      filters: { page },\n      getZipcodesForAutocomplete,\n    } = this.props;\n    const body = { page: page + 1 };\n\n    setPage(page + 1);\n    getZipcodesForAutocomplete({ body });\n  }\n\n  @autobind\n  onChange(option) {\n    const { onChange, zipcodes } = this.props;\n    const value = option ? option.value : '';\n    const zipcode = zipcodes.find(zipcode => zipcode.value === value) || {\n      label: '',\n      value: '',\n    };\n    onChange(zipcode);\n  }\n\n  @autobind\n  componentDidMount() {\n    this.makeRequest();\n  }\n\n  render() {\n    const { zipcodes, classes, wrapperClassName, ...rest } = this.props;\n\n    return (\n      <div\n        className={`${classes.zipcodeAutocompleteWrapper} ${wrapperClassName}`}>\n        <AppAutoComplete\n          {...HelperService.pick(this.props, [\n            'loading',\n            'compareKey',\n            'placeholder',\n            'selectedOption',\n            'withPagination',\n            'value',\n            'count',\n          ])}\n          isSearchable\n          isCreatable={false}\n          onMenuScrollToBottom={this.onMenuScrollToBottom}\n          onInputChange={this.onInputChange}\n          options={zipcodes}\n          className=\"zipcode-autocomplete\"\n          onChange={this.onChange}\n          {...rest}\n        />\n      </div>\n    );\n  }\n}\n\nZipCodeAutocomplete.propTypes = {\n  zipcodes: PropTypes.array,\n  loading: PropTypes.bool,\n  compareKey: PropTypes.string,\n  onChange: PropTypes.func,\n  theme: PropTypes.object,\n  wrapperClasses: PropTypes.string,\n  placeholder: PropTypes.string,\n};\n\nZipCodeAutocomplete.defaultProps = {\n  placeholder: 'Select zip code',\n  compareKey: 'label',\n  wrapperClassName: '',\n};\n"]},"metadata":{},"sourceType":"module"}