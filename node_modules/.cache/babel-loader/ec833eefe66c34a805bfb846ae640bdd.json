{"ast":null,"code":"import _objectSpread from \"/home/vladimir/workspace/bestonlinemenus-front.loc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport { resource as categorySlice } from './menu.categories.modules';\nimport { resource as dishSlice } from './menu.dishes.modules';\nimport { resource as restSlice } from '../../Restaurants/modules/restaurants.modules';\nimport { createSelector } from 'reselect';\nexport var _categorySliceSelector = function _categorySliceSelector(state) {\n  return state[categorySlice];\n};\nexport var _dishSliceSelector = function _dishSliceSelector(state) {\n  return state[dishSlice];\n};\nexport var _restSliceSelector = function _restSliceSelector(state) {\n  return state[restSlice];\n};\nexport var dishListSelector = createSelector(_dishSliceSelector, function (state) {\n  return state.data.map(finalPriceDishDecorator);\n});\nexport var dishListCountSelector = function dishListCountSelector(state) {\n  return _dishSliceSelector(state).count;\n};\nexport var dishListLoadingSelector = function dishListLoadingSelector(state) {\n  return _dishSliceSelector(state).loading;\n};\nexport var dishListFiltersSelector = function dishListFiltersSelector(state) {\n  return _dishSliceSelector(state).filters;\n};\nexport var categoriesListSelector = function categoriesListSelector(state) {\n  return _categorySliceSelector(state).data;\n};\nexport var categoriesListLoading = function categoriesListLoading(state) {\n  return _categorySliceSelector(state).loading;\n};\nexport var categoriesListFiltersSelector = function categoriesListFiltersSelector(state) {\n  return _categorySliceSelector(state).filters;\n};\nexport var restaurantSelector = function restaurantSelector(state) {\n  return _dishSliceSelector(state).restaurant;\n};\nexport var restaurantLoadingSelector = function restaurantLoadingSelector(state) {\n  return _dishSliceSelector(state).restaurantLoading;\n};\nexport var restaurantErrorSelector = function restaurantErrorSelector(state) {\n  return _restSliceSelector(state).error;\n};\nexport var orderForCheckoutSelector = createSelector(_dishSliceSelector, function (state) {\n  return state.order ? state.order.map(finalPriceDishDecorator) : [];\n});\nexport var orderForPaymentSelector = createSelector(orderForCheckoutSelector, function (order) {\n  return order.map(function (_ref) {\n    var id = _ref.id,\n        selectedSize = _ref.selectedSize,\n        selectedExtras = _ref.selectedExtras;\n    return {\n      id: id,\n      selectedSize: selectedSize,\n      selectedExtras: selectedExtras\n    };\n  });\n});\nexport var totalPriceSelector = createSelector(orderForCheckoutSelector, restaurantSelector, function (order, _ref2) {\n  var _ref2$sales_tax = _ref2.sales_tax,\n      sales_tax = _ref2$sales_tax === void 0 ? 0 : _ref2$sales_tax,\n      _ref2$delivery_fee = _ref2.delivery_fee,\n      delivery_fee = _ref2$delivery_fee === void 0 ? 0 : _ref2$delivery_fee;\n  var subtotal = order.reduce(function (sum, dish) {\n    var sumExtra = dish.selectedExtras.reduce(function (extrasSum, extraId) {\n      var size = dish.extra.find(function (extra) {\n        return extra.id === extraId;\n      });\n      var extraPrice = size ? size.price : 0;\n      extrasSum += Number(extraPrice);\n      return extrasSum;\n    }, 0);\n    var dishPrice = dish.price;\n\n    if (dish.selectedSize) {\n      var size = dish.sizes.find(function (size) {\n        return size.id === dish.selectedSize;\n      });\n      dishPrice = size ? size.price : dish.price;\n    }\n\n    sum += Number(dishPrice) + Number(sumExtra);\n    return sum;\n  }, 0);\n  return {\n    subtotal: subtotal.toFixed(2),\n    deliveryFee: delivery_fee,\n    salesTax: sales_tax,\n    total: (subtotal + subtotal / 100 * Number(delivery_fee) - subtotal / 100 * Number(sales_tax)).toFixed(2)\n  };\n});\nexport var restaurantLinkSelector = function restaurantLinkSelector(state) {\n  return _dishSliceSelector(state).link;\n};\n\nfunction getFinalPrice(dish) {\n  if (dish.sizes && dish.sizes.length) {\n    var size;\n\n    if (dish.selectedSize) {\n      size = dish.sizes.find(function (size) {\n        return size.id === dish.selectedSize;\n      });\n    }\n\n    return size ? size.price : dish.sizes[0].price;\n  }\n\n  return dish.price;\n}\n\nfunction finalPriceDishDecorator(dish) {\n  return _objectSpread({}, dish, {\n    finalPrice: getFinalPrice(dish)\n  });\n}\n\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_categorySliceSelector, \"_categorySliceSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(_dishSliceSelector, \"_dishSliceSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(_restSliceSelector, \"_restSliceSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(dishListSelector, \"dishListSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(dishListCountSelector, \"dishListCountSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(dishListLoadingSelector, \"dishListLoadingSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(dishListFiltersSelector, \"dishListFiltersSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(categoriesListSelector, \"categoriesListSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(categoriesListLoading, \"categoriesListLoading\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(categoriesListFiltersSelector, \"categoriesListFiltersSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(restaurantSelector, \"restaurantSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(restaurantLoadingSelector, \"restaurantLoadingSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(restaurantErrorSelector, \"restaurantErrorSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(orderForCheckoutSelector, \"orderForCheckoutSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(orderForPaymentSelector, \"orderForPaymentSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(totalPriceSelector, \"totalPriceSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(restaurantLinkSelector, \"restaurantLinkSelector\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(getFinalPrice, \"getFinalPrice\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  reactHotLoader.register(finalPriceDishDecorator, \"finalPriceDishDecorator\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js\");\n  leaveModule(module);\n})();\n\n;","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.selectors.js"],"names":["resource","categorySlice","dishSlice","restSlice","createSelector","_categorySliceSelector","state","_dishSliceSelector","_restSliceSelector","dishListSelector","data","map","finalPriceDishDecorator","dishListCountSelector","count","dishListLoadingSelector","loading","dishListFiltersSelector","filters","categoriesListSelector","categoriesListLoading","categoriesListFiltersSelector","restaurantSelector","restaurant","restaurantLoadingSelector","restaurantLoading","restaurantErrorSelector","error","orderForCheckoutSelector","order","orderForPaymentSelector","id","selectedSize","selectedExtras","totalPriceSelector","sales_tax","delivery_fee","subtotal","reduce","sum","dish","sumExtra","extrasSum","extraId","size","extra","find","extraPrice","price","Number","dishPrice","sizes","toFixed","deliveryFee","salesTax","total","restaurantLinkSelector","link","getFinalPrice","length","finalPrice"],"mappings":"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","sourcesContent":["import { resource as categorySlice } from './menu.categories.modules';\nimport { resource as dishSlice } from './menu.dishes.modules';\nimport { resource as restSlice } from '../../Restaurants/modules/restaurants.modules';\nimport { createSelector } from 'reselect';\n\nexport const _categorySliceSelector = state => state[categorySlice];\nexport const _dishSliceSelector = state => state[dishSlice];\nexport const _restSliceSelector = state => state[restSlice];\n\nexport const dishListSelector = createSelector(\n    _dishSliceSelector,\n    state => {\n        return state.data.map(finalPriceDishDecorator);\n    }\n);\nexport const dishListCountSelector = state => _dishSliceSelector(state).count;\nexport const dishListLoadingSelector = state =>\n    _dishSliceSelector(state).loading;\nexport const dishListFiltersSelector = state =>\n    _dishSliceSelector(state).filters;\n\nexport const categoriesListSelector = state =>\n    _categorySliceSelector(state).data;\nexport const categoriesListLoading = state =>\n    _categorySliceSelector(state).loading;\nexport const categoriesListFiltersSelector = state =>\n    _categorySliceSelector(state).filters;\n\nexport const restaurantSelector = state => _dishSliceSelector(state).restaurant;\n\nexport const restaurantLoadingSelector = state =>\n    _dishSliceSelector(state).restaurantLoading;\n\nexport const restaurantErrorSelector = state =>\n    _restSliceSelector(state).error;\n\nexport const orderForCheckoutSelector = createSelector(\n    _dishSliceSelector,\n    state => {\n        return state.order ? state.order.map(finalPriceDishDecorator) : [];\n    }\n);\n\nexport const orderForPaymentSelector = createSelector(\n    orderForCheckoutSelector,\n    order => {\n        return order.map(({ id, selectedSize, selectedExtras }) => ({\n            id,\n            selectedSize,\n            selectedExtras\n        }));\n    }\n);\n\nexport const totalPriceSelector = createSelector(\n    orderForCheckoutSelector,\n    restaurantSelector,\n    (order, { sales_tax = 0, delivery_fee = 0 }) => {\n        const subtotal = order.reduce((sum, dish) => {\n            const sumExtra = dish.selectedExtras.reduce(\n                (extrasSum, extraId) => {\n                    const size = dish.extra.find(extra => extra.id === extraId);\n                    const extraPrice = size ? size.price : 0;\n                    extrasSum += Number(extraPrice);\n                    return extrasSum;\n                },\n                0\n            );\n\n            let dishPrice = dish.price;\n\n            if (dish.selectedSize) {\n                const size = dish.sizes.find(\n                    size => size.id === dish.selectedSize\n                );\n                dishPrice = size ? size.price : dish.price;\n            }\n\n            sum += Number(dishPrice) + Number(sumExtra);\n            return sum;\n        }, 0);\n\n        return {\n            subtotal: subtotal.toFixed(2),\n            deliveryFee: delivery_fee,\n            salesTax: sales_tax,\n            total: (\n                subtotal +\n                (subtotal / 100) * Number(delivery_fee) -\n                (subtotal / 100) * Number(sales_tax)\n            ).toFixed(2)\n        };\n    }\n);\n\nexport const restaurantLinkSelector = state => _dishSliceSelector(state).link;\n\nfunction getFinalPrice(dish) {\n    if (dish.sizes && dish.sizes.length) {\n        let size;\n\n        if (dish.selectedSize) {\n            size = dish.sizes.find(size => size.id === dish.selectedSize);\n        }\n        return size ? size.price : dish.sizes[0].price;\n    }\n\n    return dish.price;\n}\n\nfunction finalPriceDishDecorator(dish) {\n    return {\n        ...dish,\n        finalPrice: getFinalPrice(dish)\n    };\n}\n"]},"metadata":{},"sourceType":"module"}