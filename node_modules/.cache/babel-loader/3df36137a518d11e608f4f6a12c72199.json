{"ast":null,"code":"import _objectSpread from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nimport { createSelector } from 'reselect';\nimport { allDishesByIdsSelector } from '../../dishes';\nimport { itemsByUuidsSelector, allItemsUuidsSelector } from '../../checkout';\nimport { clientInfoFormSyncErrorsSelector, clientInfoFormValuesSelector, isClientInfoFormPristineSelector } from '../../../components/forms/selectors';\nimport { ordersByIdsSelector } from '../../orders';\nimport { DELIVERY_METHOD } from '../../../constants';\nimport { requiredFields, additionalRequiredFields } from '../../../scenes/Checkout/modules';\nexport var activeOrderIdSelector = function activeOrderIdSelector(_ref) {\n  var restauratorOrder = _ref.modals.restauratorOrder;\n  return restauratorOrder.orderId;\n};\nexport var activeRestauratorOrderSelector = createSelector([activeOrderIdSelector, ordersByIdsSelector], function (id, byIds) {\n  return byIds[id];\n});\nexport var activeOrderInfoSelector = createSelector([activeRestauratorOrderSelector], function () {\n  var order = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    name: order.name,\n    email: order.email,\n    street_address: order.street_address || undefined,\n    city: order.city || undefined,\n    building: order.building || undefined,\n    // TODO: return empty string instead of 0\n    appartment: order.appartment || undefined,\n    // TODO: return empty string instead of 0\n    house: order.house,\n    phone: order.phone,\n    delivery_method: order.delivery_method,\n    payment_method: order.payment_method\n  };\n});\nexport var restauratorOrderModalStepSelector = function restauratorOrderModalStepSelector(_ref2) {\n  var restauratorOrder = _ref2.modals.restauratorOrder;\n  return restauratorOrder.step;\n};\nexport var activeOrderItemIdSelector = function activeOrderItemIdSelector(_ref3) {\n  var restauratorOrder = _ref3.modals.restauratorOrder;\n  return restauratorOrder.activeOrderItemId;\n};\nexport var isRestauratorOrderCreationModalOpenSelector = function isRestauratorOrderCreationModalOpenSelector(_ref4) {\n  var restauratorOrder = _ref4.modals.restauratorOrder;\n  return restauratorOrder.open && !restauratorOrder.isEditing;\n};\nexport var isRestauratorOrderEditingModalOpenSelector = function isRestauratorOrderEditingModalOpenSelector(_ref5) {\n  var restauratorOrder = _ref5.modals.restauratorOrder;\n  return restauratorOrder.open && restauratorOrder.isEditing;\n};\nvar emptyObject = {};\nexport var activeDishForRestauratorOrderModalSelector = createSelector([allDishesByIdsSelector, activeOrderItemIdSelector], function (dishesById, id) {\n  return dishesById[id] || emptyObject;\n});\nexport var newOrderItemInitialValuesSelector = createSelector([activeDishForRestauratorOrderModalSelector], function (dish) {\n  var res = _objectSpread({}, dish, {\n    selectedSize: (dish.sizes || []).length ? dish.sizes[0].id : null\n  });\n\n  return res;\n});\nexport var editedOrderItemInitialValuesSelector = createSelector([itemsByUuidsSelector, activeOrderItemIdSelector], function (itemsByUuids, uuid) {\n  var item = itemsByUuids[uuid];\n  if (!item) return undefined;\n  return _objectSpread({}, item, {\n    selectedSize: item.selectedSize.id || item.selectedSize\n  });\n}); // checking for errors of the form. If it is unmounted, isInvalid\n// selector always returns false\n\nexport var isSaveOrderButtonDisabledSelector = createSelector([clientInfoFormValuesSelector, clientInfoFormSyncErrorsSelector, allItemsUuidsSelector], function (values, errors, ids) {\n  if (values.delivery_method && values.delivery_method === DELIVERY_METHOD) {\n    var hasError = requiredFields.concat(additionalRequiredFields).some(function (field) {\n      return errors[field];\n    });\n    return hasError || !ids.length;\n  }\n\n  return requiredFields.some(function (field) {\n    return errors[field];\n  }) || !ids.length;\n});\nexport var isOrderCreationDisabled = function isOrderCreationDisabled(state) {\n  var isPristine = isClientInfoFormPristineSelector(state);\n  return isPristine || isSaveOrderButtonDisabledSelector(state);\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(activeOrderIdSelector, \"activeOrderIdSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(activeRestauratorOrderSelector, \"activeRestauratorOrderSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(activeOrderInfoSelector, \"activeOrderInfoSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(restauratorOrderModalStepSelector, \"restauratorOrderModalStepSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(activeOrderItemIdSelector, \"activeOrderItemIdSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(isRestauratorOrderCreationModalOpenSelector, \"isRestauratorOrderCreationModalOpenSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(isRestauratorOrderEditingModalOpenSelector, \"isRestauratorOrderEditingModalOpenSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(emptyObject, \"emptyObject\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(activeDishForRestauratorOrderModalSelector, \"activeDishForRestauratorOrderModalSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(newOrderItemInitialValuesSelector, \"newOrderItemInitialValuesSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(editedOrderItemInitialValuesSelector, \"editedOrderItemInitialValuesSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(isSaveOrderButtonDisabledSelector, \"isSaveOrderButtonDisabledSelector\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n  reactHotLoader.register(isOrderCreationDisabled, \"isOrderCreationDisabled\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/restaurator-order/restaurator-order-modal.selectors.js"],"names":["createSelector","allDishesByIdsSelector","itemsByUuidsSelector","allItemsUuidsSelector","clientInfoFormSyncErrorsSelector","clientInfoFormValuesSelector","isClientInfoFormPristineSelector","ordersByIdsSelector","DELIVERY_METHOD","requiredFields","additionalRequiredFields","activeOrderIdSelector","restauratorOrder","modals","orderId","activeRestauratorOrderSelector","id","byIds","activeOrderInfoSelector","order","name","email","street_address","undefined","city","building","appartment","house","phone","delivery_method","payment_method","restauratorOrderModalStepSelector","step","activeOrderItemIdSelector","activeOrderItemId","isRestauratorOrderCreationModalOpenSelector","open","isEditing","isRestauratorOrderEditingModalOpenSelector","emptyObject","activeDishForRestauratorOrderModalSelector","dishesById","newOrderItemInitialValuesSelector","dish","res","selectedSize","sizes","length","editedOrderItemInitialValuesSelector","itemsByUuids","uuid","item","isSaveOrderButtonDisabledSelector","values","errors","ids","hasError","concat","some","field","isOrderCreationDisabled","state","isPristine"],"mappings":"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","sourcesContent":["import { createSelector } from 'reselect';\n\nimport { allDishesByIdsSelector } from '../../dishes';\nimport { itemsByUuidsSelector, allItemsUuidsSelector } from '../../checkout';\nimport {\n  clientInfoFormSyncErrorsSelector,\n  clientInfoFormValuesSelector,\n  isClientInfoFormPristineSelector,\n} from '../../../components/forms/selectors';\nimport { ordersByIdsSelector } from '../../orders';\n\nimport { DELIVERY_METHOD } from '../../../constants';\nimport {\n  requiredFields,\n  additionalRequiredFields,\n} from '../../../scenes/Checkout/modules';\n\nexport const activeOrderIdSelector = ({ modals: { restauratorOrder } }) =>\n  restauratorOrder.orderId;\n\nexport const activeRestauratorOrderSelector = createSelector(\n  [activeOrderIdSelector, ordersByIdsSelector],\n  (id, byIds) => byIds[id],\n);\n\nexport const activeOrderInfoSelector = createSelector(\n  [activeRestauratorOrderSelector],\n  (order = {}) => ({\n    name: order.name,\n    email: order.email,\n    street_address: order.street_address || undefined,\n    city: order.city || undefined,\n    building: order.building || undefined, // TODO: return empty string instead of 0\n    appartment: order.appartment || undefined, // TODO: return empty string instead of 0\n    house: order.house,\n    phone: order.phone,\n    delivery_method: order.delivery_method,\n    payment_method: order.payment_method,\n  }),\n);\n\nexport const restauratorOrderModalStepSelector = ({\n  modals: { restauratorOrder },\n}) => {\n  return restauratorOrder.step;\n};\n\nexport const activeOrderItemIdSelector = ({ modals: { restauratorOrder } }) => {\n  return restauratorOrder.activeOrderItemId;\n};\n\nexport const isRestauratorOrderCreationModalOpenSelector = ({\n  modals: { restauratorOrder },\n}) => {\n  return restauratorOrder.open && !restauratorOrder.isEditing;\n};\n\nexport const isRestauratorOrderEditingModalOpenSelector = ({\n  modals: { restauratorOrder },\n}) => {\n  return restauratorOrder.open && restauratorOrder.isEditing;\n};\n\nconst emptyObject = {};\nexport const activeDishForRestauratorOrderModalSelector = createSelector(\n  [allDishesByIdsSelector, activeOrderItemIdSelector],\n  (dishesById, id) => {\n    return dishesById[id] || emptyObject;\n  },\n);\n\nexport const newOrderItemInitialValuesSelector = createSelector(\n  [activeDishForRestauratorOrderModalSelector],\n  dish => {\n    const res = {\n      ...dish,\n      selectedSize: (dish.sizes || []).length ? dish.sizes[0].id : null,\n    };\n\n    return res;\n  },\n);\n\nexport const editedOrderItemInitialValuesSelector = createSelector(\n  [itemsByUuidsSelector, activeOrderItemIdSelector],\n  (itemsByUuids, uuid) => {\n    const item = itemsByUuids[uuid];\n\n    if (!item) return undefined;\n\n    return {\n      ...item,\n      selectedSize: item.selectedSize.id || item.selectedSize,\n    };\n  },\n);\n\n// checking for errors of the form. If it is unmounted, isInvalid\n// selector always returns false\nexport const isSaveOrderButtonDisabledSelector = createSelector(\n  [\n    clientInfoFormValuesSelector,\n    clientInfoFormSyncErrorsSelector,\n    allItemsUuidsSelector,\n  ],\n  (values, errors, ids) => {\n    if (values.delivery_method && values.delivery_method === DELIVERY_METHOD) {\n      const hasError = requiredFields\n        .concat(additionalRequiredFields)\n        .some(field => errors[field]);\n\n      return hasError || !ids.length;\n    }\n\n    return requiredFields.some(field => errors[field]) || !ids.length;\n  },\n);\n\nexport const isOrderCreationDisabled = state => {\n  const isPristine = isClientInfoFormPristineSelector(state);\n  return isPristine || isSaveOrderButtonDisabledSelector(state);\n};\n"]},"metadata":{},"sourceType":"module"}