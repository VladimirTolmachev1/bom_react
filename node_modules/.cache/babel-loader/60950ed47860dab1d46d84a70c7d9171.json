{"ast":null,"code":"import _regeneratorRuntime from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(createCategoryFromModalSaga),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(updateCategoryFromModalSaga),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(patchCategoryExtrasFromModalSaga),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(resetCategoryModalFormsSaga),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(categoryCreationModalSaga);\n\nimport { takeLatest, all, put, select, call } from 'redux-saga/effects';\nimport { reset } from 'redux-form';\nimport { CATEGORY_MODAL__CREATE, CATEGORY_MODAL__UPDATE_INFO, CATEGORY_MODAL__RESET_FORMS, CATEGORY_MODAL__PATCH_EXTRAS, CATEGORY_MODAL__FULLY_CLEAR } from './category-modal.types';\nimport { SIZES_FORM, EXTRAS_FORM, CATEGORY_INFO_FORM } from '../../../components/forms/constants/form.names';\nimport { updateCategorySaga, patchCategoryExtrasSaga, createCategorySaga } from '../../categories';\nimport { managedRestaurantIdSelector } from '../../restaurants';\nimport { categoryInfoFormValuesSelector, extrasFormValuesSelector } from '../../../components/forms/selectors';\nimport { setCategoryModal } from './category-modal.actions';\nimport { showToast } from '../../../scenes/Toasts/modules';\nimport { managedCategoryIdSelector } from './category-modal.selectors';\n\nfunction createCategoryFromModalSaga() {\n  var body, category;\n  return _regeneratorRuntime.wrap(function createCategoryFromModalSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return select(categoryInfoFormValuesSelector);\n\n        case 3:\n          body = _context.sent;\n          _context.next = 6;\n          return select(managedRestaurantIdSelector);\n\n        case 6:\n          body.restaurant_id = +_context.sent;\n          _context.next = 9;\n          return call(createCategorySaga, {\n            payload: body\n          });\n\n        case 9:\n          category = _context.sent;\n          _context.next = 12;\n          return put(setCategoryModal({\n            categoryId: category.id\n          }));\n\n        case 12:\n          _context.next = 14;\n          return put(showToast({\n            text: 'The category created successful',\n            type: 'success'\n          }));\n\n        case 14:\n          _context.next = 21;\n          break;\n\n        case 16:\n          _context.prev = 16;\n          _context.t0 = _context[\"catch\"](0);\n          console.error(_context.t0);\n          _context.next = 21;\n          return put(showToast({\n            text: 'Some error occured while creating category',\n            type: 'error'\n          }));\n\n        case 21:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this, [[0, 16]]);\n}\n\nfunction updateCategoryFromModalSaga() {\n  var payload;\n  return _regeneratorRuntime.wrap(function updateCategoryFromModalSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return select(categoryInfoFormValuesSelector);\n\n        case 3:\n          payload = _context2.sent;\n          _context2.next = 6;\n          return select(managedRestaurantIdSelector);\n\n        case 6:\n          payload.restaurant_id = +_context2.sent;\n          _context2.next = 9;\n          return select(managedCategoryIdSelector);\n\n        case 9:\n          payload.id = _context2.sent;\n          _context2.next = 12;\n          return call(updateCategorySaga, {\n            payload: payload\n          });\n\n        case 12:\n          _context2.next = 14;\n          return put(showToast({\n            text: 'The category info updated successful',\n            type: 'success'\n          }));\n\n        case 14:\n          _context2.next = 21;\n          break;\n\n        case 16:\n          _context2.prev = 16;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.error(_context2.t0);\n          _context2.next = 21;\n          return put(showToast({\n            text: 'Some error occured while updating category',\n            type: 'error'\n          }));\n\n        case 21:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this, [[0, 16]]);\n}\n\nfunction patchCategoryExtrasFromModalSaga() {\n  var categoryId, extrasPayload, payload;\n  return _regeneratorRuntime.wrap(function patchCategoryExtrasFromModalSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return select(managedCategoryIdSelector);\n\n        case 3:\n          categoryId = _context3.sent;\n          _context3.next = 6;\n          return select(extrasFormValuesSelector);\n\n        case 6:\n          extrasPayload = _context3.sent;\n          payload = {\n            categoryId: categoryId,\n            extrasPayload: extrasPayload\n          };\n          _context3.next = 10;\n          return call(patchCategoryExtrasSaga, {\n            payload: payload\n          });\n\n        case 10:\n          _context3.next = 12;\n          return put(showToast({\n            text: 'The category extras saved successful',\n            type: 'success'\n          }));\n\n        case 12:\n          _context3.next = 14;\n          return put(reset(EXTRAS_FORM));\n\n        case 14:\n          _context3.next = 21;\n          break;\n\n        case 16:\n          _context3.prev = 16;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error(_context3.t0);\n          _context3.next = 21;\n          return put(showToast({\n            text: 'Some error occured while saving category extras',\n            type: 'error'\n          }));\n\n        case 21:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, this, [[0, 16]]);\n}\n\nfunction resetCategoryModalFormsSaga() {\n  return _regeneratorRuntime.wrap(function resetCategoryModalFormsSaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return all([put(reset(CATEGORY_INFO_FORM)), put(reset(SIZES_FORM)), put(reset(EXTRAS_FORM)), put(setCategoryModal({\n            activeStep: 0\n          }))]);\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, this);\n}\n\nexport function categoryCreationModalSaga() {\n  return _regeneratorRuntime.wrap(function categoryCreationModalSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return all([takeLatest(CATEGORY_MODAL__RESET_FORMS, resetCategoryModalFormsSaga), takeLatest(CATEGORY_MODAL__FULLY_CLEAR, resetCategoryModalFormsSaga), takeLatest(CATEGORY_MODAL__CREATE, createCategoryFromModalSaga), takeLatest(CATEGORY_MODAL__UPDATE_INFO, updateCategoryFromModalSaga), takeLatest(CATEGORY_MODAL__PATCH_EXTRAS, patchCategoryExtrasFromModalSaga)]);\n\n        case 2:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, this);\n}\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(createCategoryFromModalSaga, \"createCategoryFromModalSaga\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/category/category-modal.sagas.js\");\n  reactHotLoader.register(updateCategoryFromModalSaga, \"updateCategoryFromModalSaga\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/category/category-modal.sagas.js\");\n  reactHotLoader.register(patchCategoryExtrasFromModalSaga, \"patchCategoryExtrasFromModalSaga\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/category/category-modal.sagas.js\");\n  reactHotLoader.register(resetCategoryModalFormsSaga, \"resetCategoryModalFormsSaga\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/category/category-modal.sagas.js\");\n  reactHotLoader.register(categoryCreationModalSaga, \"categoryCreationModalSaga\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/category/category-modal.sagas.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/modules/modals/category/category-modal.sagas.js"],"names":["createCategoryFromModalSaga","updateCategoryFromModalSaga","patchCategoryExtrasFromModalSaga","resetCategoryModalFormsSaga","categoryCreationModalSaga","takeLatest","all","put","select","call","reset","CATEGORY_MODAL__CREATE","CATEGORY_MODAL__UPDATE_INFO","CATEGORY_MODAL__RESET_FORMS","CATEGORY_MODAL__PATCH_EXTRAS","CATEGORY_MODAL__FULLY_CLEAR","SIZES_FORM","EXTRAS_FORM","CATEGORY_INFO_FORM","updateCategorySaga","patchCategoryExtrasSaga","createCategorySaga","managedRestaurantIdSelector","categoryInfoFormValuesSelector","extrasFormValuesSelector","setCategoryModal","showToast","managedCategoryIdSelector","body","restaurant_id","payload","category","categoryId","id","text","type","console","error","extrasPayload","activeStep"],"mappings":"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","sourcesContent":["import { takeLatest, all, put, select, call } from 'redux-saga/effects';\nimport { reset } from 'redux-form';\nimport {\n  CATEGORY_MODAL__CREATE,\n  CATEGORY_MODAL__UPDATE_INFO,\n  CATEGORY_MODAL__RESET_FORMS,\n  CATEGORY_MODAL__PATCH_EXTRAS,\n  CATEGORY_MODAL__FULLY_CLEAR,\n} from './category-modal.types';\n\nimport {\n  SIZES_FORM,\n  EXTRAS_FORM,\n  CATEGORY_INFO_FORM,\n} from '../../../components/forms/constants/form.names';\n\nimport {\n  updateCategorySaga,\n  patchCategoryExtrasSaga,\n  createCategorySaga,\n} from '../../categories';\n\nimport { managedRestaurantIdSelector } from '../../restaurants';\n\nimport {\n  categoryInfoFormValuesSelector,\n  extrasFormValuesSelector,\n} from '../../../components/forms/selectors';\n\nimport { setCategoryModal } from './category-modal.actions';\nimport { showToast } from '../../../scenes/Toasts/modules';\nimport { managedCategoryIdSelector } from './category-modal.selectors';\n\nfunction* createCategoryFromModalSaga() {\n  try {\n    const body = yield select(categoryInfoFormValuesSelector);\n    body.restaurant_id = +(yield select(managedRestaurantIdSelector));\n\n    const category = yield call(createCategorySaga, { payload: body });\n\n    yield put(setCategoryModal({ categoryId: category.id }));\n    yield put(\n      showToast({ text: 'The category created successful', type: 'success' }),\n    );\n  } catch (error) {\n    console.error(error);\n    yield put(\n      showToast({\n        text: 'Some error occured while creating category',\n        type: 'error',\n      }),\n    );\n  }\n}\n\nfunction* updateCategoryFromModalSaga() {\n  try {\n    const payload = yield select(categoryInfoFormValuesSelector);\n    payload.restaurant_id = +(yield select(managedRestaurantIdSelector));\n    payload.id = yield select(managedCategoryIdSelector);\n\n    yield call(updateCategorySaga, { payload });\n\n    yield put(\n      showToast({\n        text: 'The category info updated successful',\n        type: 'success',\n      }),\n    );\n  } catch (error) {\n    console.error(error);\n    yield put(\n      showToast({\n        text: 'Some error occured while updating category',\n        type: 'error',\n      }),\n    );\n  }\n}\n\nfunction* patchCategoryExtrasFromModalSaga() {\n  try {\n    const categoryId = yield select(managedCategoryIdSelector);\n    const extrasPayload = yield select(extrasFormValuesSelector);\n\n    const payload = { categoryId, extrasPayload };\n\n    yield call(patchCategoryExtrasSaga, { payload });\n    yield put(\n      showToast({\n        text: 'The category extras saved successful',\n        type: 'success',\n      }),\n    );\n    yield put(reset(EXTRAS_FORM));\n  } catch (e) {\n    console.error(e);\n    yield put(\n      showToast({\n        text: 'Some error occured while saving category extras',\n        type: 'error',\n      }),\n    );\n  }\n}\n\nfunction* resetCategoryModalFormsSaga() {\n  yield all([\n    put(reset(CATEGORY_INFO_FORM)),\n    put(reset(SIZES_FORM)),\n    put(reset(EXTRAS_FORM)),\n    put(setCategoryModal({ activeStep: 0 })),\n  ]);\n}\n\nexport function* categoryCreationModalSaga() {\n  yield all([\n    takeLatest(CATEGORY_MODAL__RESET_FORMS, resetCategoryModalFormsSaga),\n    takeLatest(CATEGORY_MODAL__FULLY_CLEAR, resetCategoryModalFormsSaga),\n    takeLatest(CATEGORY_MODAL__CREATE, createCategoryFromModalSaga),\n    takeLatest(CATEGORY_MODAL__UPDATE_INFO, updateCategoryFromModalSaga),\n    takeLatest(CATEGORY_MODAL__PATCH_EXTRAS, patchCategoryExtrasFromModalSaga),\n  ]);\n}\n"]},"metadata":{},"sourceType":"module"}