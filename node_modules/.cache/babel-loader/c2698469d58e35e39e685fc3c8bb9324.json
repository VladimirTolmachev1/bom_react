{"ast":null,"code":"(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\n/* eslint-disable no-underscore-dangle */\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { createBrowserHistory } from 'history';\nimport { routerMiddleware } from 'connected-react-router';\nimport createSagaMiddleware from 'redux-saga';\nimport thunk from 'redux-thunk';\nimport { api, requestsMiddleware, sessionMiddleware, // crudMiddleware,\nrequestPrepareMiddleware } from './middleware';\nimport makeRootReducer from './reducers';\nimport rootSaga from './rootSaga';\nexport var history = createBrowserHistory();\n\nfunction configureStore() {\n  var initialState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var sagaMiddleware = createSagaMiddleware();\n  var coonectedRouterMiddleware = routerMiddleware(history);\n  var middleware = [thunk, requestsMiddleware, requestPrepareMiddleware, api, sessionMiddleware, // This midlware causes bugs. Todo: rewrite and move to sagas\n  // crudMiddleware,\n  sagaMiddleware, coonectedRouterMiddleware];\n  var enhancers = [];\n  var composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n  if (process.NODE_ENV === 'development') {\n    enhancers.push(window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__());\n  }\n\n  var store = createStore(makeRootReducer(history), initialState, composeEnhancers.apply(void 0, [applyMiddleware.apply(void 0, middleware)].concat(enhancers)));\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (module.hot) {\n      module.hot.accept('./reducers', function () {\n        store.replaceReducer(makeRootReducer());\n      });\n    }\n  }\n\n  store.asyncReducers = {};\n  sagaMiddleware.run(rootSaga);\n  return store;\n}\n\nvar _default = configureStore;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(history, \"history\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/store/configureStore.js\");\n  reactHotLoader.register(configureStore, \"configureStore\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/store/configureStore.js\");\n  reactHotLoader.register(_default, \"default\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/store/configureStore.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/store/configureStore.js"],"names":["createStore","applyMiddleware","compose","createBrowserHistory","routerMiddleware","createSagaMiddleware","thunk","api","requestsMiddleware","sessionMiddleware","requestPrepareMiddleware","makeRootReducer","rootSaga","history","configureStore","initialState","sagaMiddleware","coonectedRouterMiddleware","middleware","enhancers","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","process","NODE_ENV","push","__REDUX_DEVTOOLS_EXTENSION__","store","env","module","hot","accept","replaceReducer","asyncReducers","run"],"mappings":";;;;;AAAA;AACA,SAASA,WAAT,EAAsBC,eAAtB,EAAuCC,OAAvC,QAAsD,OAAtD;AACA,SAASC,oBAAT,QAAqC,SAArC;AACA,SAASC,gBAAT,QAAiC,wBAAjC;AACA,OAAOC,oBAAP,MAAiC,YAAjC;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SACEC,GADF,EAEEC,kBAFF,EAGEC,iBAHF,EAIE;AACAC,wBALF,QAMO,cANP;AAQA,OAAOC,eAAP,MAA4B,YAA5B;AACA,OAAOC,QAAP,MAAqB,YAArB;AAEA,OAAO,IAAMC,OAAO,GAAGV,oBAAoB,EAApC;;AAEP,SAASW,cAAT,GAA2C;AAAA,MAAnBC,YAAmB,uEAAJ,EAAI;AACzC,MAAMC,cAAc,GAAGX,oBAAoB,EAA3C;AACA,MAAMY,yBAAyB,GAAGb,gBAAgB,CAACS,OAAD,CAAlD;AAEA,MAAMK,UAAU,GAAG,CACjBZ,KADiB,EAEjBE,kBAFiB,EAGjBE,wBAHiB,EAIjBH,GAJiB,EAKjBE,iBALiB,EAMjB;AACA;AACAO,EAAAA,cARiB,EASjBC,yBATiB,CAAnB;AAWA,MAAME,SAAS,GAAG,EAAlB;AACA,MAAMC,gBAAgB,GACpBC,MAAM,CAACC,oCAAP,IAA+CpB,OADjD;;AAGA,MAAIqB,OAAO,CAACC,QAAR,KAAqB,aAAzB,EAAwC;AACtCL,IAAAA,SAAS,CAACM,IAAV,CACEJ,MAAM,CAACK,4BAAP,IACEL,MAAM,CAACK,4BAAP,EAFJ;AAID;;AAED,MAAMC,KAAK,GAAG3B,WAAW,CACvBW,eAAe,CAACE,OAAD,CADQ,EAEvBE,YAFuB,EAGvBK,gBAAgB,MAAhB,UAAiBnB,eAAe,MAAf,SAAmBiB,UAAnB,CAAjB,SAAoDC,SAApD,EAHuB,CAAzB;;AAMA,MAAII,OAAO,CAACK,GAAR,CAAYJ,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,QAAIK,MAAM,CAACC,GAAX,EAAgB;AACdD,MAAAA,MAAM,CAACC,GAAP,CAAWC,MAAX,CAAkB,YAAlB,EAAgC,YAAM;AACpCJ,QAAAA,KAAK,CAACK,cAAN,CAAqBrB,eAAe,EAApC;AACD,OAFD;AAGD;AACF;;AAEDgB,EAAAA,KAAK,CAACM,aAAN,GAAsB,EAAtB;AAEAjB,EAAAA,cAAc,CAACkB,GAAf,CAAmBtB,QAAnB;AAEA,SAAOe,KAAP;AACD;;eAEcb,c;AAAf;;;;;;;;;;0BAjDaD,O;0BAEJC,c","sourcesContent":["/* eslint-disable no-underscore-dangle */\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { createBrowserHistory } from 'history';\nimport { routerMiddleware } from 'connected-react-router';\nimport createSagaMiddleware from 'redux-saga';\nimport thunk from 'redux-thunk';\nimport {\n  api,\n  requestsMiddleware,\n  sessionMiddleware,\n  // crudMiddleware,\n  requestPrepareMiddleware,\n} from './middleware';\n\nimport makeRootReducer from './reducers';\nimport rootSaga from './rootSaga';\n\nexport const history = createBrowserHistory();\n\nfunction configureStore(initialState = {}) {\n  const sagaMiddleware = createSagaMiddleware();\n  const coonectedRouterMiddleware = routerMiddleware(history);\n\n  const middleware = [\n    thunk,\n    requestsMiddleware,\n    requestPrepareMiddleware,\n    api,\n    sessionMiddleware,\n    // This midlware causes bugs. Todo: rewrite and move to sagas\n    // crudMiddleware,\n    sagaMiddleware,\n    coonectedRouterMiddleware,\n  ];\n  const enhancers = [];\n  const composeEnhancers =\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n  if (process.NODE_ENV === 'development') {\n    enhancers.push(\n      window.__REDUX_DEVTOOLS_EXTENSION__ &&\n        window.__REDUX_DEVTOOLS_EXTENSION__(),\n    );\n  }\n\n  const store = createStore(\n    makeRootReducer(history),\n    initialState,\n    composeEnhancers(applyMiddleware(...middleware), ...enhancers),\n  );\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (module.hot) {\n      module.hot.accept('./reducers', () => {\n        store.replaceReducer(makeRootReducer());\n      });\n    }\n  }\n\n  store.asyncReducers = {};\n\n  sagaMiddleware.run(rootSaga);\n\n  return store;\n}\n\nexport default configureStore;\n"]},"metadata":{},"sourceType":"module"}