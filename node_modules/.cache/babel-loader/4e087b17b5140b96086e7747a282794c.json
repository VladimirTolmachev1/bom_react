{"ast":null,"code":"import _defineProperty from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _applyDecoratedDescriptor from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\n\nvar _dec,\n    _dec2,\n    _class,\n    _class2,\n    _class3,\n    _temp,\n    _jsxFileName = \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/modals/restaurator-order/base/BaseRestauratorOrderModal.js\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nimport React, { PureComponent } from 'react'; // import PropTypes from \"prop-types\";\n\nimport { Grid, withStyles, Drawer, Typography, Tabs, Tab, DialogTitle, DialogContent, DialogActions, Divider, Button } from '@material-ui/core';\nimport { connect } from 'react-redux';\nimport { autobind } from 'core-decorators';\nimport { DishAutocomplete } from '../../../DishAutocomplete';\nimport { ReviewOrderItem } from '../../../Checkout/components';\nimport { ClientInfoForm } from '../../../../components/forms';\nimport { CurrencyService } from '../../../../services';\nimport { DishOrderEditingModal, DishOrderCreationModal } from '../../dish-order';\nimport { managedRestaurantIdSelector } from '../../../../modules/restaurants';\nimport { totalPriceSelector, removeItemFromCheckout } from '../../../../modules/checkout';\nimport { orderModalStepValues as steps, restauratorOrderModalStepSelector, openOrderItemCreationModal, addItemToOrder, openOrderItemForEditing, closeRestauratorOrderModal, setRestauratorOrderModal } from '../../../../modules/modals/restaurator-order';\nimport { getDishById } from '../../../../modules/dishes';\nimport styles from './styles';\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    modalStep: restauratorOrderModalStepSelector(state),\n    orderPrice: totalPriceSelector(state),\n    restaurantId: managedRestaurantIdSelector(state)\n  };\n};\n\nvar mapDispatchToProps = {\n  onCloseRestauratorOrderModal: closeRestauratorOrderModal,\n  onOpenOrderItemForEditing: openOrderItemForEditing,\n  onOpenOrderItemCreationModal: openOrderItemCreationModal,\n  onAddItemToOrder: addItemToOrder,\n  onGetDishById: getDishById,\n  onRemoveItemFromCheckout: removeItemFromCheckout,\n  onSetRestauratorOrderModal: setRestauratorOrderModal\n};\nvar BaseRestauratorOrderModal = (_dec = withStyles(styles), _dec2 = connect(mapStateToProps, mapDispatchToProps), _dec(_class = _dec2(_class = (_class2 = (_temp = _class3 =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(BaseRestauratorOrderModal, _PureComponent);\n\n  function BaseRestauratorOrderModal() {\n    var _getPrototypeOf2, _this$bodyRenderByMod;\n\n    var _this;\n\n    _classCallCheck(this, BaseRestauratorOrderModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(BaseRestauratorOrderModal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.bodyRenderByModalStep = (_this$bodyRenderByMod = {}, _defineProperty(_this$bodyRenderByMod, steps.ORDER_ITEMS, _this.renderFormingOrderSection), _defineProperty(_this$bodyRenderByMod, steps.CLIENT_INFO, _this.renderClientInfoSection), _this$bodyRenderByMod);\n    return _this;\n  }\n\n  _createClass(BaseRestauratorOrderModal, [{\n    key: \"handleSelectDishForAddingToOrder\",\n    value: function handleSelectDishForAddingToOrder(_ref) {\n      var dishId = _ref.value;\n      var onOpenOrderItemCreationModal = this.props.onOpenOrderItemCreationModal;\n      onOpenOrderItemCreationModal(dishId);\n    }\n  }, {\n    key: \"handleRemoveOrderItem\",\n    value: function handleRemoveOrderItem(item) {\n      var onRemoveItemFromCheckout = this.props.onRemoveItemFromCheckout;\n      onRemoveItemFromCheckout(item.uuid);\n    }\n  }, {\n    key: \"handleSetStep\",\n    value: function handleSetStep(e, step) {\n      var onSetRestauratorOrderModal = this.props.onSetRestauratorOrderModal;\n      onSetRestauratorOrderModal({\n        step: step\n      });\n    }\n  }, {\n    key: \"renderFormingOrderSection\",\n    value: function renderFormingOrderSection() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          restaurantId = _this$props.restaurantId,\n          onOpenOrderItemForEditing = _this$props.onOpenOrderItemForEditing,\n          products = _this$props.products;\n      return React.createElement(Grid, {\n        container: true,\n        spacing: 16,\n        direction: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(DishAutocomplete, {\n        restaurant_id: restaurantId,\n        placeholder: \"Search by dish name to add a dish\",\n        onChange: this.handleSelectDishForAddingToOrder,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"title\",\n        paragraph: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Order items:\"), React.createElement(Grid, {\n        container: true,\n        spacing: 32,\n        direction: \"column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, products && products.map(function (product) {\n        return React.createElement(Grid, {\n          item: true,\n          key: product.id || product.uuid,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, React.createElement(ReviewOrderItem, {\n          item: product,\n          handleEditOrderItemClick: onOpenOrderItemForEditing,\n          handleRemoveOrderItemClick: _this2.handleRemoveOrderItem,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }));\n      }))));\n    }\n  }, {\n    key: \"renderClientInfoSection\",\n    value: function renderClientInfoSection() {\n      var orderInfo = this.props.orderInfo;\n      return React.createElement(ClientInfoForm, {\n        initialValues: orderInfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      });\n    }\n  }, {\n    key: \"renderTitle\",\n    value: function renderTitle() {\n      var _this$props2 = this.props,\n          titleText = _this$props2.titleText,\n          orderPrice = _this$props2.orderPrice,\n          classes = _this$props2.classes,\n          modalStep = _this$props2.modalStep;\n      return React.createElement(DialogTitle, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        justify: \"space-between\",\n        alignItems: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, titleText), React.createElement(Typography, {\n        variant: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"$\", CurrencyService.show(orderPrice.total))), React.createElement(Tabs, {\n        value: modalStep,\n        className: classes.restaurantOrderTabs,\n        onChange: this.handleSetStep,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Tab, {\n        className: classes.restaurantOrderTab,\n        label: \"Product items\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(Tab, {\n        className: classes.restaurantOrderTab,\n        label: \"Client info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      })), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          open = _this$props3.open,\n          classes = _this$props3.classes,\n          modalStep = _this$props3.modalStep,\n          isSubmitDisabled = _this$props3.isSubmitDisabled,\n          onCloseRestauratorOrderModal = _this$props3.onCloseRestauratorOrderModal,\n          onAddItemToOrder = _this$props3.onAddItemToOrder,\n          onFormSubmit = _this$props3.onFormSubmit;\n      return React.createElement(Drawer, {\n        open: open,\n        anchor: \"right\",\n        onClose: onCloseRestauratorOrderModal,\n        PaperProps: {\n          classes: {\n            root: classes.restaurantOrderDrawerBody\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, this.renderTitle(), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, this.bodyRenderByModalStep[modalStep]()), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), React.createElement(DialogActions, {\n        classes: {\n          root: classes.dialogActions\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(Button, {\n        disabled: isSubmitDisabled,\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: onFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \"Save\")), React.createElement(DishOrderEditingModal, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }), React.createElement(DishOrderCreationModal, {\n        submitBtnText: \"Add to order\",\n        onFormSubmit: onAddItemToOrder,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return BaseRestauratorOrderModal;\n}(PureComponent), _class3.defaultProps = {\n  submitBtnText: 'Save order',\n  initialValues: {\n    info: {}\n  }\n}, _temp), (_applyDecoratedDescriptor(_class2.prototype, \"handleSelectDishForAddingToOrder\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"handleSelectDishForAddingToOrder\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"handleRemoveOrderItem\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"handleRemoveOrderItem\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"handleSetStep\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"handleSetStep\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"renderFormingOrderSection\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"renderFormingOrderSection\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"renderClientInfoSection\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"renderClientInfoSection\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"renderTitle\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"renderTitle\"), _class2.prototype)), _class2)) || _class) || _class);\nexport { BaseRestauratorOrderModal as default };\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(mapStateToProps, \"mapStateToProps\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/modals/restaurator-order/base/BaseRestauratorOrderModal.js\");\n  reactHotLoader.register(mapDispatchToProps, \"mapDispatchToProps\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/modals/restaurator-order/base/BaseRestauratorOrderModal.js\");\n  reactHotLoader.register(BaseRestauratorOrderModal, \"BaseRestauratorOrderModal\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/modals/restaurator-order/base/BaseRestauratorOrderModal.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/modals/restaurator-order/base/BaseRestauratorOrderModal.js"],"names":["React","PureComponent","Grid","withStyles","Drawer","Typography","Tabs","Tab","DialogTitle","DialogContent","DialogActions","Divider","Button","connect","autobind","DishAutocomplete","ReviewOrderItem","ClientInfoForm","CurrencyService","DishOrderEditingModal","DishOrderCreationModal","managedRestaurantIdSelector","totalPriceSelector","removeItemFromCheckout","orderModalStepValues","steps","restauratorOrderModalStepSelector","openOrderItemCreationModal","addItemToOrder","openOrderItemForEditing","closeRestauratorOrderModal","setRestauratorOrderModal","getDishById","styles","mapStateToProps","state","modalStep","orderPrice","restaurantId","mapDispatchToProps","onCloseRestauratorOrderModal","onOpenOrderItemForEditing","onOpenOrderItemCreationModal","onAddItemToOrder","onGetDishById","onRemoveItemFromCheckout","onSetRestauratorOrderModal","BaseRestauratorOrderModal","bodyRenderByModalStep","ORDER_ITEMS","renderFormingOrderSection","CLIENT_INFO","renderClientInfoSection","dishId","value","props","item","uuid","e","step","products","handleSelectDishForAddingToOrder","map","product","id","handleRemoveOrderItem","orderInfo","titleText","classes","show","total","restaurantOrderTabs","handleSetStep","restaurantOrderTab","open","isSubmitDisabled","onFormSubmit","root","restaurantOrderDrawerBody","renderTitle","dialogActions","defaultProps","submitBtnText","initialValues","info"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\n// import PropTypes from \"prop-types\";\nimport {\n  Grid,\n  withStyles,\n  Drawer,\n  Typography,\n  Tabs,\n  Tab,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Divider,\n  Button,\n} from '@material-ui/core';\nimport { connect } from 'react-redux';\nimport { autobind } from 'core-decorators';\n\nimport { DishAutocomplete } from '../../../DishAutocomplete';\nimport { ReviewOrderItem } from '../../../Checkout/components';\nimport { ClientInfoForm } from '../../../../components/forms';\nimport { CurrencyService } from '../../../../services';\nimport {\n  DishOrderEditingModal,\n  DishOrderCreationModal,\n} from '../../dish-order';\n\nimport { managedRestaurantIdSelector } from '../../../../modules/restaurants';\n\nimport {\n  totalPriceSelector,\n  removeItemFromCheckout,\n} from '../../../../modules/checkout';\nimport {\n  orderModalStepValues as steps,\n  restauratorOrderModalStepSelector,\n  openOrderItemCreationModal,\n  addItemToOrder,\n  openOrderItemForEditing,\n  closeRestauratorOrderModal,\n  setRestauratorOrderModal,\n} from '../../../../modules/modals/restaurator-order';\nimport { getDishById } from '../../../../modules/dishes';\nimport styles from './styles';\n\nconst mapStateToProps = state => ({\n  modalStep: restauratorOrderModalStepSelector(state),\n  orderPrice: totalPriceSelector(state),\n  restaurantId: managedRestaurantIdSelector(state),\n});\n\nconst mapDispatchToProps = {\n  onCloseRestauratorOrderModal: closeRestauratorOrderModal,\n  onOpenOrderItemForEditing: openOrderItemForEditing,\n  onOpenOrderItemCreationModal: openOrderItemCreationModal,\n  onAddItemToOrder: addItemToOrder,\n  onGetDishById: getDishById,\n  onRemoveItemFromCheckout: removeItemFromCheckout,\n  onSetRestauratorOrderModal: setRestauratorOrderModal,\n};\n\nexport default\n@withStyles(styles)\n@connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)\nclass BaseRestauratorOrderModal extends PureComponent {\n  static defaultProps = {\n    submitBtnText: 'Save order',\n    initialValues: {\n      info: {},\n    },\n  };\n\n  bodyRenderByModalStep = {\n    [steps.ORDER_ITEMS]: this.renderFormingOrderSection,\n    [steps.CLIENT_INFO]: this.renderClientInfoSection,\n  };\n\n  @autobind\n  handleSelectDishForAddingToOrder({ value: dishId }) {\n    const { onOpenOrderItemCreationModal } = this.props;\n\n    onOpenOrderItemCreationModal(dishId);\n  }\n\n  @autobind\n  handleRemoveOrderItem(item) {\n    const { onRemoveItemFromCheckout } = this.props;\n\n    onRemoveItemFromCheckout(item.uuid);\n  }\n\n  @autobind\n  handleSetStep(e, step) {\n    const { onSetRestauratorOrderModal } = this.props;\n\n    onSetRestauratorOrderModal({ step });\n  }\n\n  @autobind\n  renderFormingOrderSection() {\n    const { restaurantId, onOpenOrderItemForEditing, products } = this.props;\n\n    return (\n      <Grid container spacing={16} direction=\"column\">\n        <Grid item>\n          <DishAutocomplete\n            restaurant_id={restaurantId}\n            placeholder=\"Search by dish name to add a dish\"\n            onChange={this.handleSelectDishForAddingToOrder}\n          />\n        </Grid>\n\n        <Grid item>\n          <Typography variant=\"title\" paragraph>\n            Order items:\n          </Typography>\n\n          <Grid container spacing={32} direction=\"column\">\n            {products &&\n              products.map(product => (\n                <Grid item key={product.id || product.uuid}>\n                  <ReviewOrderItem\n                    item={product}\n                    handleEditOrderItemClick={onOpenOrderItemForEditing}\n                    handleRemoveOrderItemClick={this.handleRemoveOrderItem}\n                  />\n                </Grid>\n              ))}\n          </Grid>\n        </Grid>\n      </Grid>\n    );\n  }\n\n  @autobind\n  renderClientInfoSection() {\n    const { orderInfo } = this.props;\n\n    return <ClientInfoForm initialValues={orderInfo} />;\n  }\n\n  @autobind\n  renderTitle() {\n    const { titleText, orderPrice, classes, modalStep } = this.props;\n\n    return (\n      <DialogTitle>\n        <Grid container justify=\"space-between\" alignItems=\"center\">\n          <Typography variant=\"title\">{titleText}</Typography>\n          <Typography variant=\"title\">\n            ${CurrencyService.show(orderPrice.total)}\n          </Typography>\n        </Grid>\n        <Tabs\n          value={modalStep}\n          className={classes.restaurantOrderTabs}\n          onChange={this.handleSetStep}>\n          <Tab className={classes.restaurantOrderTab} label=\"Product items\" />\n          <Tab className={classes.restaurantOrderTab} label=\"Client info\" />\n        </Tabs>\n        <Divider />\n      </DialogTitle>\n    );\n  }\n\n  render() {\n    const {\n      open,\n      classes,\n      modalStep,\n      isSubmitDisabled,\n      onCloseRestauratorOrderModal,\n      onAddItemToOrder,\n      onFormSubmit,\n    } = this.props;\n\n    return (\n      <Drawer\n        open={open}\n        anchor=\"right\"\n        onClose={onCloseRestauratorOrderModal}\n        PaperProps={{\n          classes: {\n            root: classes.restaurantOrderDrawerBody,\n          },\n        }}>\n        {this.renderTitle()}\n        <DialogContent>{this.bodyRenderByModalStep[modalStep]()}</DialogContent>\n        <Divider />\n        <DialogActions classes={{ root: classes.dialogActions }}>\n          <Button\n            disabled={isSubmitDisabled}\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={onFormSubmit}>\n            Save\n          </Button>\n        </DialogActions>\n\n        <DishOrderEditingModal />\n        <DishOrderCreationModal\n          submitBtnText=\"Add to order\"\n          onFormSubmit={onAddItemToOrder}\n        />\n      </Drawer>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}