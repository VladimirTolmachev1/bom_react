{"ast":null,"code":"import _classCallCheck from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _applyDecoratedDescriptor from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\n\nvar _dec,\n    _class,\n    _class2,\n    _class3,\n    _temp,\n    _jsxFileName = \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/Menu/components/DishItem/DishItem.js\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport CheckCircle from '@material-ui/icons/CheckCircle';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Paper from '@material-ui/core/Paper';\nimport AddShoppingCart from '@material-ui/icons/AddShoppingCart';\nimport Fab from '@material-ui/core/Fab';\nimport { Grid, withStyles, Typography, Hidden, Button } from '@material-ui/core';\nimport { autobind } from 'core-decorators';\nimport styles from './styles';\nimport { Popup, DishTitle, DishPicture } from '../../../../components';\nimport './DishItem.scss';\nvar DishItem = (_dec = withStyles(styles), _dec(_class = (_class2 = (_temp = _class3 =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(DishItem, _PureComponent);\n\n  function DishItem() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DishItem);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DishItem)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      anchorEl: null\n    };\n    _this.dishCardRef = React.createRef();\n\n    _this.renderExtra = function () {\n      var anchorEl = _this.state.anchorEl;\n      var _this$props = _this.props,\n          isPublished = _this$props.dish.isPublished,\n          mode = _this$props.mode,\n          classes = _this$props.classes;\n      var open = Boolean(anchorEl); // eslint-disable-next-line eqeqeq\n\n      if (mode == 'client') {\n        return React.createElement(Fab, {\n          className: classes.addToCartBtn,\n          color: \"primary\",\n          \"aria-label\": \"Add\",\n          onClick: _this.onBasketClick,\n          size: \"small\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, React.createElement(AddShoppingCart, {\n          fontSize: \"inherit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }));\n      }\n\n      return React.createElement(React.Fragment, null, isPublished && React.createElement(Tooltip, {\n        title: \"Published\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(CheckCircle, {\n        className: \"dish-list__item-published-mark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      })), React.createElement(Menu, {\n        anchorEl: anchorEl,\n        open: open,\n        id: \"dish-list__item-menu\",\n        onClose: _this.onCloseMenuClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, _this.renderMenuItems()), React.createElement(IconButton, {\n        className: \"dish-list__item-menu-btn\",\n        \"aria-label\": \"More\",\n        \"aria-owns\": open ? 'long-menu' : undefined,\n        \"aria-haspopup\": \"true\",\n        onClick: _this.onClickMenuOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(MoreVertIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      })));\n    };\n\n    return _this;\n  }\n\n  _createClass(DishItem, [{\n    key: \"onClickMenuOpen\",\n    value: function onClickMenuOpen(event) {\n      this.setState({\n        anchorEl: event.currentTarget\n      });\n    }\n  }, {\n    key: \"onCloseMenuClick\",\n    value: function onCloseMenuClick() {\n      this.setState({\n        anchorEl: null\n      });\n    }\n  }, {\n    key: \"onRemoveClick\",\n    value: function onRemoveClick() {\n      var _this$props2 = this.props,\n          showConfirm = _this$props2.showConfirm,\n          removeDish = _this$props2.removeDish,\n          id = _this$props2.dish.id;\n      showConfirm({\n        data: {\n          body: {\n            id: id\n          }\n        },\n        onSuccess: removeDish,\n        content: 'Are you sure you want to delete dish?'\n      });\n      this.onCloseMenuClick();\n    }\n  }, {\n    key: \"onPublishCLick\",\n    value: function onPublishCLick() {\n      var _this$props3 = this.props,\n          showConfirm = _this$props3.showConfirm,\n          publishDishes = _this$props3.publishDishes,\n          id = _this$props3.dish.id;\n      showConfirm({\n        data: {\n          dish_items: [id]\n        },\n        onSuccess: publishDishes,\n        content: 'Are you sure you want to publish dish?'\n      });\n      this.onCloseMenuClick();\n    }\n  }, {\n    key: \"onUnpublishCLick\",\n    value: function onUnpublishCLick() {\n      var _this$props4 = this.props,\n          showConfirm = _this$props4.showConfirm,\n          unpublishDishes = _this$props4.unpublishDishes,\n          id = _this$props4.dish.id;\n      showConfirm({\n        data: {\n          dish_items: [id]\n        },\n        onSuccess: unpublishDishes,\n        content: 'Are you sure you want to unpublish dish?'\n      });\n      this.onCloseMenuClick();\n    }\n  }, {\n    key: \"onClickMenuItem\",\n    value: function onClickMenuItem(event) {\n      var action = event.target.dataset.action;\n\n      switch (action) {\n        case 'Publish':\n          {\n            return this.onPublishCLick(event);\n          }\n\n        case 'Unpublish':\n          {\n            return this.onUnpublishCLick(event);\n          }\n\n        case 'Edit':\n          {\n            return this.props.onEditClick();\n          }\n\n        case 'Remove':\n          {\n            return this.onRemoveClick(event);\n          }\n\n        default:\n          {\n            return false;\n          }\n      }\n    }\n  }, {\n    key: \"renderMenuItems\",\n    value: function renderMenuItems() {\n      var _this2 = this;\n\n      var isPublished = this.props.dish.isPublished;\n      return ['Publish', 'Unpublish', 'Edit', 'Remove'].map(function (item, id) {\n        if (isPublished && item === 'Publish') return null;\n        if (!isPublished && item === 'Unpublish') return null;\n        return React.createElement(MenuItem, {\n          key: id,\n          onClick: _this2.onClickMenuItem,\n          \"data-action\": item,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, item);\n      });\n    }\n  }, {\n    key: \"onBasketClick\",\n    value: function onBasketClick() {\n      var _this$props5 = this.props,\n          onBasketClick = _this$props5.onBasketClick,\n          dish = _this$props5.dish;\n      onBasketClick && onBasketClick(dish);\n    }\n  }, {\n    key: \"renderDescription\",\n    value: function renderDescription() {\n      var _this$props6 = this.props,\n          description = _this$props6.dish.description,\n          classes = _this$props6.classes;\n      return React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(Hidden, {\n        xsDown: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"subtitle2\",\n        className: classes.dishDescription,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, description)), description && React.createElement(Hidden, {\n        smUp: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(Popup, {\n        placement: \"left bottom\",\n        anchorEl: this.getDishCardAnchor,\n        popperClass: classes.descriptionPopper,\n        TriggerComponent: Button,\n        triggerContent: \"Show description\",\n        triggerProps: {\n          className: classes.showDescriptionBtn,\n          color: 'primary'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        variant: \"subtitle2\",\n        className: classes.dishDescription,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, description))));\n    }\n  }, {\n    key: \"getDishCardAnchor\",\n    value: function getDishCardAnchor() {\n      return this.dishCardRef.current;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props7 = this.props,\n          _this$props7$dish = _this$props7.dish,\n          name = _this$props7$dish.name,\n          picture = _this$props7$dish.picture,\n          price = _this$props7$dish.price,\n          classes = _this$props7.classes;\n      return React.createElement(\"div\", {\n        ref: this.dishCardRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        className: \"dish-list__item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        justify: \"space-between\",\n        spacing: 16,\n        wrap: \"nowrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        container: true,\n        className: classes.dishImageWrapper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(DishPicture, {\n        src: picture,\n        className: classes.dishImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        container: true,\n        direction: \"column\",\n        className: classes.dishBodyWrapper,\n        spacing: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, React.createElement(DishTitle, {\n        name: name,\n        price: price,\n        typographyVariant: \"subtitle1\",\n        extraPart: this.renderExtra(),\n        typographyClass: classes.dishTitleText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      })), this.renderDescription()))));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return DishItem;\n}(PureComponent), _class3.propTypes = {\n  removeDish: PropTypes.func,\n  dish: PropTypes.object,\n  showConfirm: PropTypes.func,\n  publishDishes: PropTypes.func,\n  mode: PropTypes.string\n}, _temp), (_applyDecoratedDescriptor(_class2.prototype, \"onClickMenuOpen\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onClickMenuOpen\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"onCloseMenuClick\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onCloseMenuClick\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"onRemoveClick\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onRemoveClick\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"onPublishCLick\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onPublishCLick\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"onUnpublishCLick\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onUnpublishCLick\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"onClickMenuItem\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onClickMenuItem\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"onBasketClick\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onBasketClick\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"getDishCardAnchor\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"getDishCardAnchor\"), _class2.prototype)), _class2)) || _class);\nexport { DishItem as default };\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(DishItem, \"DishItem\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/Menu/components/DishItem/DishItem.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/scenes/Menu/components/DishItem/DishItem.js"],"names":["React","PureComponent","PropTypes","IconButton","Menu","MenuItem","MoreVertIcon","CheckCircle","Tooltip","Paper","AddShoppingCart","Fab","Grid","withStyles","Typography","Hidden","Button","autobind","styles","Popup","DishTitle","DishPicture","DishItem","state","anchorEl","dishCardRef","createRef","renderExtra","props","isPublished","dish","mode","classes","open","Boolean","addToCartBtn","onBasketClick","onCloseMenuClick","renderMenuItems","undefined","onClickMenuOpen","event","setState","currentTarget","showConfirm","removeDish","id","data","body","onSuccess","content","publishDishes","dish_items","unpublishDishes","action","target","dataset","onPublishCLick","onUnpublishCLick","onEditClick","onRemoveClick","map","item","onClickMenuItem","description","dishDescription","getDishCardAnchor","descriptionPopper","className","showDescriptionBtn","color","current","name","picture","price","dishImageWrapper","dishImage","dishBodyWrapper","dishTitleText","renderDescription","propTypes","func","object","string"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport CheckCircle from '@material-ui/icons/CheckCircle';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Paper from '@material-ui/core/Paper';\nimport AddShoppingCart from '@material-ui/icons/AddShoppingCart';\nimport Fab from '@material-ui/core/Fab';\nimport {\n  Grid,\n  withStyles,\n  Typography,\n  Hidden,\n  Button,\n} from '@material-ui/core';\nimport { autobind } from 'core-decorators';\n\nimport styles from './styles';\nimport { Popup, DishTitle, DishPicture } from '../../../../components';\n\nimport './DishItem.scss';\n\nexport default\n@withStyles(styles)\nclass DishItem extends PureComponent {\n  state = {\n    anchorEl: null,\n  };\n\n  static propTypes = {\n    removeDish: PropTypes.func,\n    dish: PropTypes.object,\n    showConfirm: PropTypes.func,\n    publishDishes: PropTypes.func,\n    mode: PropTypes.string,\n  };\n\n  dishCardRef = React.createRef();\n\n  @autobind\n  onClickMenuOpen(event) {\n    this.setState({ anchorEl: event.currentTarget });\n  }\n\n  @autobind\n  onCloseMenuClick() {\n    this.setState({ anchorEl: null });\n  }\n\n  @autobind\n  onRemoveClick() {\n    const {\n      showConfirm,\n      removeDish,\n      dish: { id },\n    } = this.props;\n\n    showConfirm({\n      data: { body: { id } },\n      onSuccess: removeDish,\n      content: 'Are you sure you want to delete dish?',\n    });\n    this.onCloseMenuClick();\n  }\n\n  @autobind\n  onPublishCLick() {\n    const {\n      showConfirm,\n      publishDishes,\n      dish: { id },\n    } = this.props;\n\n    showConfirm({\n      data: { dish_items: [id] },\n      onSuccess: publishDishes,\n      content: 'Are you sure you want to publish dish?',\n    });\n    this.onCloseMenuClick();\n  }\n\n  @autobind\n  onUnpublishCLick() {\n    const {\n      showConfirm,\n      unpublishDishes,\n      dish: { id },\n    } = this.props;\n\n    showConfirm({\n      data: { dish_items: [id] },\n      onSuccess: unpublishDishes,\n      content: 'Are you sure you want to unpublish dish?',\n    });\n    this.onCloseMenuClick();\n  }\n\n  @autobind\n  onClickMenuItem(event) {\n    const {\n      target: {\n        dataset: { action },\n      },\n    } = event;\n\n    switch (action) {\n      case 'Publish': {\n        return this.onPublishCLick(event);\n      }\n\n      case 'Unpublish': {\n        return this.onUnpublishCLick(event);\n      }\n\n      case 'Edit': {\n        return this.props.onEditClick();\n      }\n\n      case 'Remove': {\n        return this.onRemoveClick(event);\n      }\n\n      default: {\n        return false;\n      }\n    }\n  }\n\n  renderMenuItems() {\n    const {\n      dish: { isPublished },\n    } = this.props;\n\n    return ['Publish', 'Unpublish', 'Edit', 'Remove'].map((item, id) => {\n      if (isPublished && item === 'Publish') return null;\n      if (!isPublished && item === 'Unpublish') return null;\n\n      return (\n        <MenuItem key={id} onClick={this.onClickMenuItem} data-action={item}>\n          {item}\n        </MenuItem>\n      );\n    });\n  }\n\n  @autobind\n  onBasketClick() {\n    const { onBasketClick, dish } = this.props;\n\n    onBasketClick && onBasketClick(dish);\n  }\n\n  renderExtra = () => {\n    const { anchorEl } = this.state;\n    const {\n      dish: { isPublished },\n      mode,\n      classes,\n    } = this.props;\n    const open = Boolean(anchorEl);\n\n    // eslint-disable-next-line eqeqeq\n    if (mode == 'client') {\n      return (\n        <Fab\n          className={classes.addToCartBtn}\n          color=\"primary\"\n          aria-label=\"Add\"\n          onClick={this.onBasketClick}\n          size=\"small\">\n          <AddShoppingCart fontSize=\"inherit\" />\n        </Fab>\n      );\n    }\n\n    return (\n      <>\n        {isPublished && (\n          <Tooltip title=\"Published\">\n            <CheckCircle className=\"dish-list__item-published-mark\" />\n          </Tooltip>\n        )}\n        <Menu\n          anchorEl={anchorEl}\n          open={open}\n          id=\"dish-list__item-menu\"\n          onClose={this.onCloseMenuClick}>\n          {this.renderMenuItems()}\n        </Menu>\n        <IconButton\n          className=\"dish-list__item-menu-btn\"\n          aria-label=\"More\"\n          aria-owns={open ? 'long-menu' : undefined}\n          aria-haspopup=\"true\"\n          onClick={this.onClickMenuOpen}>\n          <MoreVertIcon />\n        </IconButton>\n      </>\n    );\n  };\n\n  renderDescription() {\n    const {\n      dish: { description },\n      classes,\n    } = this.props;\n\n    return (\n      <Grid item>\n        <Hidden xsDown>\n          <Typography variant=\"subtitle2\" className={classes.dishDescription}>\n            {description}\n          </Typography>\n        </Hidden>\n\n        {description && (\n          <Hidden smUp>\n            <Popup\n              placement=\"left bottom\"\n              anchorEl={this.getDishCardAnchor}\n              popperClass={classes.descriptionPopper}\n              TriggerComponent={Button}\n              triggerContent=\"Show description\"\n              triggerProps={{\n                className: classes.showDescriptionBtn,\n                color: 'primary',\n              }}>\n              <Typography\n                variant=\"subtitle2\"\n                className={classes.dishDescription}>\n                {description}\n              </Typography>\n            </Popup>\n          </Hidden>\n        )}\n      </Grid>\n    );\n  }\n\n  @autobind\n  getDishCardAnchor() {\n    return this.dishCardRef.current;\n  }\n\n  render() {\n    const {\n      dish: { name, picture, price },\n      classes,\n    } = this.props;\n\n    return (\n      <div ref={this.dishCardRef}>\n        <Paper className=\"dish-list__item\">\n          <Grid container justify=\"space-between\" spacing={16} wrap=\"nowrap\">\n            <Grid item container className={classes.dishImageWrapper}>\n              <DishPicture src={picture} className={classes.dishImage} />\n            </Grid>\n\n            <Grid\n              item\n              container\n              direction=\"column\"\n              className={classes.dishBodyWrapper}\n              spacing={8}>\n              <Grid item>\n                <DishTitle\n                  name={name}\n                  price={price}\n                  typographyVariant=\"subtitle1\"\n                  extraPart={this.renderExtra()}\n                  typographyClass={classes.dishTitleText}\n                />\n              </Grid>\n\n              {this.renderDescription()}\n            </Grid>\n          </Grid>\n        </Paper>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}