{"ast":null,"code":"import _objectSpread from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _applyDecoratedDescriptor from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\n\nvar _dec,\n    _class,\n    _class2,\n    _jsxFileName = \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/components/AppAutoComplete/AppAutoComplete.js\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport Select from 'react-select';\nimport { withStyles } from '@material-ui/core/styles';\nimport NoSsr from '@material-ui/core/NoSsr';\nimport { autobind } from 'core-decorators';\nimport { styles } from './AppAutoComplete.styles';\nimport { HelperService } from '../../services';\nimport { Control, // Option,\nMenuAutocomplete, NoOptionsMessage, Placeholder, SingleValue, ValueContainer, MultiValue } from './components';\nvar components = {\n  Control: Control,\n  Menu: MenuAutocomplete,\n  MultiValue: MultiValue,\n  NoOptionsMessage: NoOptionsMessage,\n  // Option,\n  Placeholder: Placeholder,\n  SingleValue: SingleValue,\n  ValueContainer: ValueContainer\n};\nvar AppAutoComplete = (_dec = withStyles(styles, {\n  withTheme: true\n}), _dec(_class = (_class2 =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(AppAutoComplete, _PureComponent);\n\n  function AppAutoComplete(props) {\n    var _this;\n\n    _classCallCheck(this, AppAutoComplete);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AppAutoComplete).call(this, props));\n    _this.state = {\n      customOptions: [],\n      valuesToExclude: _this.props.valuesToExclude\n    };\n    _this.inputDebouncer = HelperService.debounce(function () {\n      props.onInputChange.apply(props, arguments);\n    }, 500);\n    return _this;\n  }\n\n  _createClass(AppAutoComplete, [{\n    key: \"onMenuScrollToBottom\",\n    value: function onMenuScrollToBottom() {\n      // implementation of load pagination\n      var _this$props = this.props,\n          onMenuScrollToBottom = _this$props.onMenuScrollToBottom,\n          count = _this$props.count,\n          loading = _this$props.loading;\n      var options = this.getOptions();\n\n      if (!loading && options.length < count) {\n        onMenuScrollToBottom.apply(void 0, arguments);\n      }\n    }\n  }, {\n    key: \"onCreateOption\",\n    value: function onCreateOption(option) {\n      var onChange = this.props.onChange;\n      var customValue = {\n        label: option,\n        value: option\n      };\n      this.setState({\n        customOptions: _toConsumableArray(this.state.customOptions).concat([customValue])\n      });\n      onChange(customValue);\n    }\n  }, {\n    key: \"getOptions\",\n    value: function getOptions() {\n      var _this$props2 = this.props,\n          options = _this$props2.options,\n          optionFilter = _this$props2.optionFilter;\n      var _this$state = this.state,\n          customOptions = _this$state.customOptions,\n          valuesToExclude = _this$state.valuesToExclude;\n      var resultOptions = options.concat(customOptions);\n\n      if (valuesToExclude.length || optionFilter) {\n        resultOptions = resultOptions.filter(function (option) {\n          if (typeof optionFilter === 'function' && !optionFilter(option)) {\n            return false;\n          }\n\n          if (valuesToExclude.length && valuesToExclude.some(function (val) {\n            return val === option.value;\n          })) {\n            return false;\n          }\n\n          return true;\n        });\n      }\n\n      return resultOptions;\n    }\n  }, {\n    key: \"getSelectStyles\",\n    value: function getSelectStyles() {\n      var theme = this.props.theme;\n      return {\n        input: function input(base) {\n          return _objectSpread({}, base, {\n            color: theme.palette.text.primary,\n            '& input': {\n              font: 'inherit'\n            }\n          });\n        },\n        container: function container(base) {\n          return _objectSpread({}, base);\n        },\n        indicatorSeparator: function indicatorSeparator(provided) {\n          return _objectSpread({}, provided, {\n            width: 0\n          });\n        }\n      };\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(option) {\n      var _this$props3 = this.props,\n          onChange = _this$props3.onChange,\n          exludeOptionsAfterSelection = _this$props3.exludeOptionsAfterSelection;\n      onChange(option);\n\n      if (exludeOptionsAfterSelection) {\n        this.setState({\n          valuesToExclude: _toConsumableArray(this.state.valuesToExclude).concat([option.value])\n        });\n      }\n    }\n  }, {\n    key: \"getCommonSelectOptions\",\n    value: function getCommonSelectOptions() {\n      var _this$props4 = this.props,\n          value = _this$props4.value,\n          selectedOption = _this$props4.selectedOption,\n          compareKey = _this$props4.compareKey,\n          withPagination = _this$props4.withPagination,\n          textFieldProps = _this$props4.textFieldProps,\n          loading = _this$props4.loading,\n          classes = _this$props4.classes;\n      var options = this.getOptions();\n      var selectValue = selectedOption || options.find(function (item) {\n        return item[compareKey] === value;\n      }) || null;\n\n      var config = _objectSpread({}, HelperService.pick(this.props, ['onFocus', 'isClearable', 'placeholder', 'isSearchable']), {\n        disabled: loading,\n        isLoading: loading,\n        onInputChange: this.inputDebouncer,\n        classes: classes,\n        styles: this.getSelectStyles(),\n        options: options,\n        components: components,\n        value: selectValue,\n        formatCreateLabel: function formatCreateLabel(inputValue) {\n          return \"Select custom: \".concat(inputValue);\n        },\n        textFieldProps: textFieldProps,\n        onChange: this.handleChange\n      });\n\n      if (withPagination) {\n        config.onMenuScrollToBottom = this.onMenuScrollToBottom;\n      }\n\n      return config;\n    }\n  }, {\n    key: \"renderPlainSelect\",\n    value: function renderPlainSelect() {\n      var _this$props5 = this.props,\n          classes = _this$props5.classes,\n          autoCompleteWrpClasses = _this$props5.autoCompleteWrpClasses;\n      return React.createElement(\"div\", {\n        className: \"\".concat(classes.root, \" \").concat(autoCompleteWrpClasses),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(Select, Object.assign({}, this.getCommonSelectOptions(), {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props6 = this.props,\n          classes = _this$props6.classes,\n          isCreatable = _this$props6.isCreatable,\n          autoCompleteWrpClasses = _this$props6.autoCompleteWrpClasses;\n\n      if (!isCreatable) {\n        return this.renderPlainSelect();\n      }\n\n      return React.createElement(\"div\", {\n        className: \"\".concat(classes.root, \" \").concat(autoCompleteWrpClasses),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(NoSsr, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(CreatableSelect, Object.assign({}, this.getCommonSelectOptions(), {\n        onCreateOption: this.onCreateOption,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: classes.divider,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return AppAutoComplete;\n}(PureComponent), (_applyDecoratedDescriptor(_class2.prototype, \"onMenuScrollToBottom\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onMenuScrollToBottom\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"onCreateOption\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"onCreateOption\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"handleChange\", [autobind], Object.getOwnPropertyDescriptor(_class2.prototype, \"handleChange\"), _class2.prototype)), _class2)) || _class);\nexport { AppAutoComplete as default };\nAppAutoComplete.propTypes = {\n  loading: PropTypes.bool,\n  onFocus: PropTypes.func,\n  count: PropTypes.number,\n  classes: PropTypes.any,\n  onInputChange: PropTypes.func,\n  styles: PropTypes.any,\n  options: PropTypes.array,\n  placeholder: PropTypes.string,\n  value: PropTypes.any,\n  isClearable: PropTypes.bool,\n  onChange: PropTypes.func,\n  theme: PropTypes.object,\n  compareKey: PropTypes.string,\n  isCreatable: PropTypes.bool,\n  withPagination: PropTypes.bool,\n  autoCompleteWrpClasses: PropTypes.string,\n  textFieldProps: PropTypes.object\n};\nAppAutoComplete.defaultProps = {\n  autoCompleteWrpClasses: '',\n  compareKey: 'value',\n  isCreatable: true,\n  withPagination: true,\n  textFieldProps: {},\n  valuesToExclude: []\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(components, \"components\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/components/AppAutoComplete/AppAutoComplete.js\");\n  reactHotLoader.register(AppAutoComplete, \"AppAutoComplete\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/components/AppAutoComplete/AppAutoComplete.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/components/AppAutoComplete/AppAutoComplete.js"],"names":["React","PureComponent","PropTypes","CreatableSelect","Select","withStyles","NoSsr","autobind","styles","HelperService","Control","MenuAutocomplete","NoOptionsMessage","Placeholder","SingleValue","ValueContainer","MultiValue","components","Menu","AppAutoComplete","withTheme","props","state","customOptions","valuesToExclude","inputDebouncer","debounce","onInputChange","onMenuScrollToBottom","count","loading","options","getOptions","length","option","onChange","customValue","label","value","setState","optionFilter","resultOptions","concat","filter","some","val","theme","input","base","color","palette","text","primary","font","container","indicatorSeparator","provided","width","exludeOptionsAfterSelection","selectedOption","compareKey","withPagination","textFieldProps","classes","selectValue","find","item","config","pick","disabled","isLoading","getSelectStyles","formatCreateLabel","inputValue","handleChange","autoCompleteWrpClasses","root","getCommonSelectOptions","isCreatable","renderPlainSelect","onCreateOption","divider","propTypes","bool","onFocus","func","number","any","array","placeholder","string","isClearable","object","defaultProps"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport CreatableSelect from 'react-select/lib/Creatable';\nimport Select from 'react-select';\nimport { withStyles } from '@material-ui/core/styles';\nimport NoSsr from '@material-ui/core/NoSsr';\nimport { autobind } from 'core-decorators';\nimport { styles } from './AppAutoComplete.styles';\nimport { HelperService } from '../../services';\n\nimport {\n  Control,\n  // Option,\n  MenuAutocomplete,\n  NoOptionsMessage,\n  Placeholder,\n  SingleValue,\n  ValueContainer,\n  MultiValue,\n} from './components';\n\nconst components = {\n  Control,\n  Menu: MenuAutocomplete,\n  MultiValue,\n  NoOptionsMessage,\n  // Option,\n  Placeholder,\n  SingleValue,\n  ValueContainer,\n};\n\nexport default\n@withStyles(styles, { withTheme: true })\nclass AppAutoComplete extends PureComponent {\n  state = {\n    customOptions: [],\n    valuesToExclude: this.props.valuesToExclude,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.inputDebouncer = HelperService.debounce((...args) => {\n      props.onInputChange(...args);\n    }, 500);\n  }\n\n  @autobind\n  onMenuScrollToBottom(...args) {\n    // implementation of load pagination\n    const { onMenuScrollToBottom, count, loading } = this.props;\n    const options = this.getOptions();\n\n    if (!loading && options.length < count) {\n      onMenuScrollToBottom(...args);\n    }\n  }\n\n  @autobind\n  onCreateOption(option) {\n    const { onChange } = this.props;\n    const customValue = {\n      label: option,\n      value: option,\n    };\n\n    this.setState({\n      customOptions: [...this.state.customOptions, customValue],\n    });\n\n    onChange(customValue);\n  }\n\n  getOptions() {\n    const { options, optionFilter } = this.props;\n    const { customOptions, valuesToExclude } = this.state;\n\n    let resultOptions = options.concat(customOptions);\n\n    if (valuesToExclude.length || optionFilter) {\n      resultOptions = resultOptions.filter(option => {\n        if (typeof optionFilter === 'function' && !optionFilter(option)) {\n          return false;\n        }\n\n        if (\n          valuesToExclude.length &&\n          valuesToExclude.some(val => val === option.value)\n        ) {\n          return false;\n        }\n\n        return true;\n      });\n    }\n\n    return resultOptions;\n  }\n\n  getSelectStyles() {\n    const { theme } = this.props;\n\n    return {\n      input: base => ({\n        ...base,\n        color: theme.palette.text.primary,\n        '& input': {\n          font: 'inherit',\n        },\n      }),\n      container: base => ({\n        ...base,\n        // height: '350px',\n      }),\n      indicatorSeparator: provided => ({\n        ...provided,\n        width: 0,\n      }),\n    };\n  }\n\n  @autobind\n  handleChange(option) {\n    const { onChange, exludeOptionsAfterSelection } = this.props;\n    onChange(option);\n\n    if (exludeOptionsAfterSelection) {\n      this.setState({\n        valuesToExclude: [...this.state.valuesToExclude, option.value],\n      });\n    }\n  }\n\n  getCommonSelectOptions() {\n    const {\n      value,\n      selectedOption, // manualy set selected option from outer component\n      compareKey,\n      withPagination,\n      textFieldProps,\n      loading,\n      classes,\n    } = this.props;\n    const options = this.getOptions();\n    const selectValue =\n      selectedOption ||\n      options.find(item => item[compareKey] === value) ||\n      null;\n\n    const config = {\n      ...HelperService.pick(this.props, [\n        'onFocus',\n        'isClearable',\n        'placeholder',\n        'isSearchable',\n      ]),\n      disabled: loading,\n      isLoading: loading,\n      onInputChange: this.inputDebouncer,\n      classes,\n      styles: this.getSelectStyles(),\n      options,\n      components,\n      value: selectValue,\n      formatCreateLabel: inputValue => `Select custom: ${inputValue}`,\n      textFieldProps,\n      onChange: this.handleChange,\n    };\n\n    if (withPagination) {\n      config.onMenuScrollToBottom = this.onMenuScrollToBottom;\n    }\n    return config;\n  }\n\n  renderPlainSelect() {\n    const { classes, autoCompleteWrpClasses } = this.props;\n    return (\n      <div className={`${classes.root} ${autoCompleteWrpClasses}`}>\n        <Select {...this.getCommonSelectOptions()} />\n      </div>\n    );\n  }\n\n  render() {\n    const { classes, isCreatable, autoCompleteWrpClasses } = this.props;\n\n    if (!isCreatable) {\n      return this.renderPlainSelect();\n    }\n\n    return (\n      <div className={`${classes.root} ${autoCompleteWrpClasses}`}>\n        <NoSsr>\n          <CreatableSelect\n            {...this.getCommonSelectOptions()}\n            onCreateOption={this.onCreateOption}\n          />\n          <div className={classes.divider} />\n        </NoSsr>\n      </div>\n    );\n  }\n}\n\nAppAutoComplete.propTypes = {\n  loading: PropTypes.bool,\n  onFocus: PropTypes.func,\n  count: PropTypes.number,\n  classes: PropTypes.any,\n  onInputChange: PropTypes.func,\n  styles: PropTypes.any,\n  options: PropTypes.array,\n  placeholder: PropTypes.string,\n  value: PropTypes.any,\n  isClearable: PropTypes.bool,\n  onChange: PropTypes.func,\n  theme: PropTypes.object,\n  compareKey: PropTypes.string,\n  isCreatable: PropTypes.bool,\n  withPagination: PropTypes.bool,\n  autoCompleteWrpClasses: PropTypes.string,\n  textFieldProps: PropTypes.object,\n};\n\nAppAutoComplete.defaultProps = {\n  autoCompleteWrpClasses: '',\n  compareKey: 'value',\n  isCreatable: true,\n  withPagination: true,\n  textFieldProps: {},\n  valuesToExclude: [],\n};\n"]},"metadata":{},"sourceType":"module"}