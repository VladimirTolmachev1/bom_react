{"ast":null,"code":"import _classCallCheck from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nexport var API_PREFIX = 'api';\nexport var ApiService =\n/*#__PURE__*/\nfunction () {\n  function ApiService() {\n    _classCallCheck(this, ApiService);\n  }\n\n  _createClass(ApiService, null, [{\n    key: \"bodyJSONStringify\",\n    value: function bodyJSONStringify(body) {\n      return JSON.stringify(body);\n    }\n  }, {\n    key: \"bodyToFormData\",\n    value: function bodyToFormData(body) {\n      var formData = new FormData(); // eslint-disable-next-line\n\n      for (var name in body) {\n        formData.append(name, body[name]);\n      }\n\n      return formData;\n    }\n  }, {\n    key: \"createRequestProxy\",\n    value: function createRequestProxy(request, params) {\n      var xhr;\n      var promise = new Promise(function (resolve, reject) {\n        xhr = ApiService.createRequest(resolve, reject, request);\n        xhr.send(params);\n      });\n      return {\n        promise: promise,\n        xhr: xhr\n      };\n    }\n  }, {\n    key: \"createRequest\",\n    value: function createRequest(resolve, reject, request) {\n      var method = request.method,\n          body = request.body;\n      var xhr = new XMLHttpRequest();\n      var url = request.isCustomApiEndpoint ? request.endpoint : \"\".concat(process.env.REACT_APP_APINAME, \"/\").concat(API_PREFIX).concat(request.endpoint); // TEMPORARY HARD FIX BEFORE REMOVING THIS SERVICE AND LEGACY MIDDLEWARES\n\n      if (['PATCH', 'DELETE'].includes(method) && body && body.id) {\n        url = \"\".concat(url, \"/\").concat(body.id);\n      }\n\n      xhr.open(request.method, url);\n\n      ApiService._prepareHeaderByRequestParams(xhr, request);\n\n      xhr.onload = function () {\n        xhr.status >= 200 && xhr.status < 300 ? resolve(ApiService.transformSuccessResponse(xhr)) : reject(ApiService.transformErrorResponse(xhr));\n      };\n\n      xhr.onerror = function () {\n        return reject(ApiService.transformErrorResponse(xhr));\n      };\n\n      xhr.onabort = function () {\n        return reject(ApiService.transformErrorResponse(xhr));\n      };\n\n      return xhr;\n    }\n  }, {\n    key: \"get\",\n    value: function get(request) {\n      if (request.isCustomApiEndpoint) {\n        return ApiService.createRequestProxy(request);\n      }\n\n      var url = new URL(request.endpoint, document.location.origin);\n      var path = '';\n\n      if (request.body) {\n        Object.keys(request.body) && Object.keys(request.body).forEach(function (key) {\n          if (typeof url.searchParams !== 'undefined') {\n            request.body[key] && url.searchParams.append(key, request.body[key]);\n          } else {\n            // Old safari version don't support searchParams, so we generating query params by this way.\n            // eslint-disable-next-line no-lonely-if\n            if (request.body[key]) {\n              if (path === '') {\n                path += \"\".concat(key, \"=\").concat(request.body[key]);\n              } else {\n                path += \"&\".concat(key, \"=\").concat(request.body[key]);\n              }\n            }\n          }\n        });\n      }\n\n      if (typeof url.searchParams !== 'undefined') {\n        request.endpoint = url.pathname + url.search;\n      } else {\n        request.endpoint = url.pathname + (path ? \"?\".concat(path) : '');\n      }\n\n      return ApiService.createRequestProxy(request);\n    }\n  }, {\n    key: \"post\",\n    value: function post(request) {\n      var params = ApiService.callAPIMatix[request.contentType](request.body);\n      return ApiService.createRequestProxy(request, params);\n    }\n  }, {\n    key: \"put\",\n    value: function put(request) {\n      var params = ApiService.callAPIMatix[request.contentType](request.body);\n      return ApiService.createRequestProxy(request, params);\n    }\n  }, {\n    key: \"patch\",\n    value: function patch(request) {\n      var params = ApiService.callAPIMatix[request.contentType](request.body);\n      return ApiService.createRequestProxy(request, params);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(request) {\n      var params = ApiService.callAPIMatix[request.contentType](request.body);\n      return ApiService.createRequestProxy(request, params);\n    }\n  }, {\n    key: \"_prepareHeaderByRequestParams\",\n    value: function _prepareHeaderByRequestParams(xhr, request) {\n      var token = window.localStorage.getItem('token') || '';\n\n      if (request.contentType === 'application/json') {\n        xhr.setRequestHeader('Content-Type', request.contentType);\n      }\n\n      if (!request.isCustomApiEndpoint) {\n        xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\n        xhr.setRequestHeader('Access-Control-Allow-Credentials', true);\n        xhr.setRequestHeader('Access-Control-Allow-Methods', '*');\n        xhr.setRequestHeader('Access-Control-Allow-Request-Headers', 'Authorization, Content-Type');\n        xhr.setRequestHeader('Authorization', \"Bearer \".concat(token));\n      }\n    }\n  }, {\n    key: \"transformErrorResponse\",\n    value: function transformErrorResponse(xhr) {\n      var response = xhr.response;\n\n      if (ApiService.isJsonString(xhr.response)) {\n        response = JSON.parse(xhr.response);\n      }\n\n      return {\n        response: response,\n        status: xhr.status\n      };\n    }\n  }, {\n    key: \"transformSuccessResponse\",\n    value: function transformSuccessResponse(xhr) {\n      var response = xhr.response;\n\n      if (ApiService.isJsonString(response)) {\n        response = JSON.parse(response);\n      }\n\n      return response;\n    }\n  }, {\n    key: \"isJsonString\",\n    value: function isJsonString(str) {\n      try {\n        JSON.parse(str);\n      } catch (e) {\n        return false;\n      }\n\n      return true;\n    }\n  }]);\n\n  return ApiService;\n}();\nApiService.callAPIMatix = {\n  'multipart/form-data': ApiService.bodyToFormData,\n  'application/json': ApiService.bodyJSONStringify\n};\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(API_PREFIX, \"API_PREFIX\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/services/ApiService/ApiService.js\");\n  reactHotLoader.register(ApiService, \"ApiService\", \"/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/services/ApiService/ApiService.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus.loc/frontend/src/services/ApiService/ApiService.js"],"names":["API_PREFIX","ApiService","body","JSON","stringify","formData","FormData","name","append","request","params","xhr","promise","Promise","resolve","reject","createRequest","send","method","XMLHttpRequest","url","isCustomApiEndpoint","endpoint","process","env","REACT_APP_APINAME","includes","id","open","_prepareHeaderByRequestParams","onload","status","transformSuccessResponse","transformErrorResponse","onerror","onabort","createRequestProxy","URL","document","location","origin","path","Object","keys","forEach","key","searchParams","pathname","search","callAPIMatix","contentType","token","window","localStorage","getItem","setRequestHeader","response","isJsonString","parse","str","e","bodyToFormData","bodyJSONStringify"],"mappings":"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","sourcesContent":["export const API_PREFIX = 'api';\nexport class ApiService {\n  static callAPIMatix = {\n    'multipart/form-data': ApiService.bodyToFormData,\n    'application/json': ApiService.bodyJSONStringify,\n  };\n\n  static bodyJSONStringify(body) {\n    return JSON.stringify(body);\n  }\n\n  static bodyToFormData(body) {\n    const formData = new FormData();\n\n    // eslint-disable-next-line\n    for (const name in body) {\n      formData.append(name, body[name]);\n    }\n\n    return formData;\n  }\n\n  static createRequestProxy(request, params) {\n    let xhr;\n    const promise = new Promise((resolve, reject) => {\n      xhr = ApiService.createRequest(resolve, reject, request);\n      xhr.send(params);\n    });\n\n    return {\n      promise,\n      xhr,\n    };\n  }\n\n  static createRequest(resolve, reject, request) {\n    const { method, body } = request;\n    const xhr = new XMLHttpRequest();\n\n    let url = request.isCustomApiEndpoint\n      ? request.endpoint\n      : `${process.env.REACT_APP_APINAME}/${API_PREFIX}${request.endpoint}`;\n\n    // TEMPORARY HARD FIX BEFORE REMOVING THIS SERVICE AND LEGACY MIDDLEWARES\n    if (['PATCH', 'DELETE'].includes(method) && body && body.id) {\n      url = `${url}/${body.id}`;\n    }\n\n    xhr.open(request.method, url);\n\n    ApiService._prepareHeaderByRequestParams(xhr, request);\n\n    xhr.onload = () => {\n      xhr.status >= 200 && xhr.status < 300\n        ? resolve(ApiService.transformSuccessResponse(xhr))\n        : reject(ApiService.transformErrorResponse(xhr));\n    };\n\n    xhr.onerror = () => reject(ApiService.transformErrorResponse(xhr));\n    xhr.onabort = () => reject(ApiService.transformErrorResponse(xhr));\n\n    return xhr;\n  }\n\n  static get(request) {\n    if (request.isCustomApiEndpoint) {\n      return ApiService.createRequestProxy(request);\n    }\n\n    const url = new URL(request.endpoint, document.location.origin);\n    let path = '';\n\n    if (request.body) {\n      Object.keys(request.body) &&\n        Object.keys(request.body).forEach(key => {\n          if (typeof url.searchParams !== 'undefined') {\n            request.body[key] &&\n              url.searchParams.append(key, request.body[key]);\n          } else {\n            // Old safari version don't support searchParams, so we generating query params by this way.\n            // eslint-disable-next-line no-lonely-if\n            if (request.body[key]) {\n              if (path === '') {\n                path += `${key}=${request.body[key]}`;\n              } else {\n                path += `&${key}=${request.body[key]}`;\n              }\n            }\n          }\n        });\n    }\n\n    if (typeof url.searchParams !== 'undefined') {\n      request.endpoint = url.pathname + url.search;\n    } else {\n      request.endpoint = url.pathname + (path ? `?${path}` : '');\n    }\n\n    return ApiService.createRequestProxy(request);\n  }\n\n  static post(request) {\n    const params = ApiService.callAPIMatix[request.contentType](request.body);\n    return ApiService.createRequestProxy(request, params);\n  }\n\n  static put(request) {\n    const params = ApiService.callAPIMatix[request.contentType](request.body);\n    return ApiService.createRequestProxy(request, params);\n  }\n\n  static patch(request) {\n    const params = ApiService.callAPIMatix[request.contentType](request.body);\n    return ApiService.createRequestProxy(request, params);\n  }\n\n  static delete(request) {\n    const params = ApiService.callAPIMatix[request.contentType](request.body);\n    return ApiService.createRequestProxy(request, params);\n  }\n\n  static _prepareHeaderByRequestParams(xhr, request) {\n    const token = window.localStorage.getItem('token') || '';\n    if (request.contentType === 'application/json') {\n      xhr.setRequestHeader('Content-Type', request.contentType);\n    }\n\n    if (!request.isCustomApiEndpoint) {\n      xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\n      xhr.setRequestHeader('Access-Control-Allow-Credentials', true);\n      xhr.setRequestHeader('Access-Control-Allow-Methods', '*');\n      xhr.setRequestHeader(\n        'Access-Control-Allow-Request-Headers',\n        'Authorization, Content-Type',\n      );\n      xhr.setRequestHeader('Authorization', `Bearer ${token}`);\n    }\n  }\n\n  static transformErrorResponse(xhr) {\n    let { response } = xhr;\n    if (ApiService.isJsonString(xhr.response)) {\n      response = JSON.parse(xhr.response);\n    }\n    return {\n      response,\n      status: xhr.status,\n    };\n  }\n\n  static transformSuccessResponse(xhr) {\n    let { response } = xhr;\n    if (ApiService.isJsonString(response)) {\n      response = JSON.parse(response);\n    }\n    return response;\n  }\n\n  static isJsonString(str) {\n    try {\n      JSON.parse(str);\n    } catch (e) {\n      return false;\n    }\n    return true;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}