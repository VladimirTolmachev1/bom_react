{"ast":null,"code":"import _defineProperty from \"/home/vladimir/workspace/bestonlinemenus-front.loc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/home/vladimir/workspace/bestonlinemenus-front.loc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/vladimir/workspace/bestonlinemenus-front.loc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/vladimir/workspace/bestonlinemenus-front.loc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport { ReduxCrudService } from '/services';\nimport { HelperService } from '/services';\nimport uuid from 'uuid/v4';\nimport { GET_RESTAURANTS_BY_ID_REQUEST, GET_RESTAURANTS_BY_ID_SUCCESS, GET_RESTAURANTS_BY_ID_ERROR } from '/scenes/Restaurants/modules/restaurants.modules';\nexport var resource = '/dish';\nexport var PUBLISH_DISH_REQUEST = \"\".concat(resource, \"/publish/request\");\nexport var PUBLISH_DISH_SUCCESS = \"\".concat(resource, \"/publish/success\");\nexport var PUBLISH_DISH_ERROR = \"\".concat(resource, \"/publish/error\");\nexport var UNPUBLISH_DISH_REQUEST = \"\".concat(resource, \"/unpublish/request\");\nexport var UNPUBLISH_DISH_SUCCESS = \"\".concat(resource, \"/unpublish/success\");\nexport var UNPUBLISH_DISH_ERROR = \"\".concat(resource, \"/unpublish/error\");\nexport var SET_DISH_FILTERS = \"\".concat(resource, \"/filters/changed\");\nexport var SET_DISH_PAGE = \"\".concat(resource, \"/filters/set-page\");\nexport var ADD_DISH_IN_ORDER = \"\".concat(resource, \"/orded/add\");\nexport var REMOVE_DISH_FROM_ORDER = \"\".concat(resource, \"/order/remove\");\nexport var SET_DISH_EXTRA_IN_ORDER = \"\".concat(resource, \"/order/set-extra\");\nexport var REMOVE_DISH_EXTRA_IN_ORDER = \"\".concat(resource, \"/order/remove-extra\");\nexport var SET_DISH_SIZE_IN_ORDER = \"\".concat(resource, \"/order/set-size\");\nexport var SET_RESTAURANT_LINK = 'set-restaurant-link';\nexport var CREAN_DISH_ORDER = \"\".concat(resource, \"/order/clean\");\nexport var CLEANUP_DISH = \"\".concat(resource, \"/creanup\");\nexport var CLEAN_DISH_LIST = \"\".concat(resource, \"/list/clean\");\n\nvar _ReduxCrudService$get = ReduxCrudService.getActionCrudTypes(resource),\n    _ReduxCrudService$get2 = _slicedToArray(_ReduxCrudService$get.GET, 3),\n    GET_DISH_LIST_REQUEST = _ReduxCrudService$get2[0],\n    GET_DISH_LIST_SUCCESS = _ReduxCrudService$get2[1],\n    GET_DISH_LIST_ERROR = _ReduxCrudService$get2[2],\n    _ReduxCrudService$get3 = _slicedToArray(_ReduxCrudService$get.POST, 3),\n    CREATE_DISH_REQUEST = _ReduxCrudService$get3[0],\n    CREATE_DISH_SUCCESS = _ReduxCrudService$get3[1],\n    CREATE_DISH_ERROR = _ReduxCrudService$get3[2],\n    _ReduxCrudService$get4 = _slicedToArray(_ReduxCrudService$get.GET_BY_ID, 3),\n    GET_DISH_BY_ID_REQUEST = _ReduxCrudService$get4[0],\n    GET_DISH_BY_ID_SUCCESS = _ReduxCrudService$get4[1],\n    GET_DISH_BY_ID_ERROR = _ReduxCrudService$get4[2],\n    _ReduxCrudService$get5 = _slicedToArray(_ReduxCrudService$get.PATCH, 3),\n    UPDATE_DISH_REQUEST = _ReduxCrudService$get5[0],\n    UPDATE_DISH_SUCCESS = _ReduxCrudService$get5[1],\n    UPDATE_DISH_ERROR = _ReduxCrudService$get5[2],\n    _ReduxCrudService$get6 = _slicedToArray(_ReduxCrudService$get.DELETE, 3),\n    DELETE_DISH_REQUEST = _ReduxCrudService$get6[0],\n    DELETE_DISH_SUCCESS = _ReduxCrudService$get6[1],\n    DELETE_DISH_ERROR = _ReduxCrudService$get6[2];\n\nexport { GET_DISH_LIST_REQUEST, GET_DISH_LIST_SUCCESS, GET_DISH_LIST_ERROR, CREATE_DISH_REQUEST, CREATE_DISH_SUCCESS, CREATE_DISH_ERROR, GET_DISH_BY_ID_REQUEST, GET_DISH_BY_ID_SUCCESS, GET_DISH_BY_ID_ERROR, UPDATE_DISH_REQUEST, UPDATE_DISH_SUCCESS, UPDATE_DISH_ERROR, DELETE_DISH_REQUEST, DELETE_DISH_SUCCESS, DELETE_DISH_ERROR };\n\nvar getInitialState = function getInitialState() {\n  return {\n    loading: false,\n    restaurantLoading: false,\n    error: null,\n    filters: {\n      category_id: '',\n      page: 1,\n      limit: 10\n    },\n    data: [],\n    order: getInitialOrder(),\n    restaurant: {\n      page_info: {}\n    },\n    link: null,\n    count: null\n  };\n};\n\nexport var reducer = _defineProperty({\n  name: resource\n}, resource, function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getInitialState();\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  switch (action.type) {\n    case GET_DISH_LIST_REQUEST:\n    case DELETE_DISH_REQUEST:\n      return _objectSpread({}, state, {\n        loading: true\n      });\n\n    case GET_DISH_LIST_SUCCESS:\n      return _objectSpread({}, state, {\n        count: Number(action.response.count),\n        data: _toConsumableArray(state.data).concat(_toConsumableArray(mapRetrievedDishArray(action.response.data))),\n        loading: false\n      });\n\n    case SET_DISH_FILTERS:\n      return _objectSpread({}, state, {\n        data: [],\n        filters: _objectSpread({\n          page: 1\n        }, state.filters, action.filters)\n      });\n\n    case CLEANUP_DISH:\n      {\n        return getInitialState();\n      }\n\n    case ADD_DISH_IN_ORDER:\n      {\n        var order = {\n          restaurant_id: state.restaurant.id,\n          data: _toConsumableArray(state.order).concat([_addDishInOrder({\n            state: state,\n            action: action\n          })])\n        };\n        setOrderInStorage(order);\n        return _objectSpread({}, state, {\n          order: order.data\n        });\n      }\n\n    case SET_DISH_EXTRA_IN_ORDER:\n      {\n        var _order = {\n          restaurant_id: state.restaurant.id,\n          data: _setDishExtra({\n            state: state,\n            action: action\n          })\n        };\n        setOrderInStorage(_order);\n        return _objectSpread({}, state, {\n          order: _order.data\n        });\n      }\n\n    case CREAN_DISH_ORDER:\n      {\n        setOrderInStorage({\n          restaurant_id: null,\n          data: []\n        });\n        return _objectSpread({}, state, {\n          order: []\n        });\n      }\n\n    case CLEAN_DISH_LIST:\n      {\n        return _objectSpread({}, state, {\n          filters: {\n            category_id: '',\n            page: 1,\n            limit: 10\n          },\n          data: []\n        });\n      }\n\n    case REMOVE_DISH_EXTRA_IN_ORDER:\n      {\n        var _order2 = {\n          restaurant_id: state.restaurant.id,\n          data: _removeDishExtra({\n            state: state,\n            action: action\n          })\n        };\n        setOrderInStorage(_order2);\n        return _objectSpread({}, state, {\n          order: _order2.data\n        });\n      }\n\n    case SET_RESTAURANT_LINK:\n      {\n        return _objectSpread({}, state, {\n          link: action.link\n        });\n      }\n\n    case SET_DISH_SIZE_IN_ORDER:\n      {\n        return _objectSpread({}, state, {\n          data: _setDishSizeInList({\n            state: state,\n            action: action\n          }),\n          order: _setDishSize({\n            state: state,\n            action: action\n          })\n        });\n      }\n\n    case REMOVE_DISH_FROM_ORDER:\n      {\n        var _order3 = {\n          restaurant_id: state.restaurant.id,\n          data: _removeDishFromOrder({\n            state: state,\n            action: action\n          })\n        };\n        setOrderInStorage(_order3);\n        return _objectSpread({}, state, {\n          order: _order3.data\n        });\n      }\n\n    case GET_RESTAURANTS_BY_ID_REQUEST:\n      {\n        return _objectSpread({}, state, {\n          restaurantLoading: true\n        });\n      }\n\n    case GET_RESTAURANTS_BY_ID_SUCCESS:\n      {\n        var _order4 = HelperService.getFromStorage(window.localStorage, 'order');\n\n        return _objectSpread({}, state, {\n          restaurant: action.response,\n          order: _order4 && _order4.restaurant_id !== action.response.id ? [] : state.order,\n          restaurantLoading: false\n        });\n      }\n\n    case GET_RESTAURANTS_BY_ID_ERROR:\n      {\n        return _objectSpread({}, state, {\n          restaurantLoading: false,\n          error: action.response\n        });\n      }\n\n    case SET_DISH_PAGE:\n      {\n        return _objectSpread({}, state, {\n          filters: _objectSpread({}, state.filters, {\n            page: action.page\n          })\n        });\n      }\n\n    case GET_DISH_LIST_ERROR:\n      return _objectSpread({}, state, {\n        error: action.error,\n        loading: false\n      });\n\n    case DELETE_DISH_SUCCESS:\n    case DELETE_DISH_ERROR:\n      {\n        return _objectSpread({}, state, {\n          loading: false\n        });\n      }\n\n    default:\n      return state;\n  }\n});\n\nfunction _addDishInOrder(_ref) {\n  var state = _ref.state,\n      action = _ref.action;\n\n  var dish = _objectSpread({}, state.data.find(function (dish) {\n    return dish.id === action.id;\n  }));\n\n  dish.uuid = uuid();\n  dish.selectedExtras = [];\n  dish.selectedSize = dish.selectedSize || null;\n  return dish;\n}\n\nfunction _removeDishFromOrder(_ref2) {\n  var state = _ref2.state,\n      action = _ref2.action;\n  return state.order.filter(function (dish, index) {\n    return dish.id !== action.id || index !== state.order.findIndex(function (d) {\n      return d.id === dish.id;\n    });\n  });\n}\n\nfunction _setDishExtra(_ref3) {\n  var state = _ref3.state,\n      action = _ref3.action;\n  var dishIndex = state.order.findIndex(function (dish) {\n    return dish.uuid === action.dishUUID;\n  });\n\n  var newDish = _objectSpread({}, state.order[dishIndex]);\n\n  newDish.selectedExtras = newDish.selectedExtras.concat(action.extraId);\n  return state.order.map(function (dish, index) {\n    return dishIndex === index ? newDish : dish;\n  });\n}\n\nfunction _removeDishExtra(_ref4) {\n  var state = _ref4.state,\n      action = _ref4.action;\n  var dishIndex = state.order.findIndex(function (dish) {\n    return dish.uuid === action.dishUUID;\n  });\n\n  var newDish = _objectSpread({}, state.order[dishIndex]);\n\n  newDish.selectedExtras = newDish.selectedExtras.filter(function (extraId) {\n    return extraId !== action.extraId;\n  });\n  return state.order.map(function (dish, index) {\n    return dishIndex === index ? newDish : dish;\n  });\n}\n\nfunction _setDishSize(_ref5) {\n  var state = _ref5.state,\n      action = _ref5.action;\n  var dishIndex = state.order.findIndex(function (dish) {\n    return dish.uuid === action.dishUUID;\n  });\n\n  var newDish = _objectSpread({}, state.order[dishIndex]);\n\n  newDish.selectedSize = action.sizeId;\n  return state.order.map(function (dish, index) {\n    return dishIndex === index ? newDish : dish;\n  });\n}\n\nfunction _setDishSizeInList(_ref6) {\n  var state = _ref6.state,\n      action = _ref6.action;\n  var dishIndex = state.data.findIndex(function (dish) {\n    return dish.uuid === action.dishUUID;\n  });\n\n  var newDish = _objectSpread({}, state.data[dishIndex]);\n\n  newDish.selectedSize = action.sizeId;\n  return state.data.map(function (dish, index) {\n    return dishIndex === index ? newDish : dish;\n  });\n}\n\nexport function setRestaurantLink(link) {\n  return {\n    type: SET_RESTAURANT_LINK,\n    link: link\n  };\n}\nexport function cleanOrder() {\n  return {\n    type: CREAN_DISH_ORDER\n  };\n}\nexport function cleanDishes() {\n  return {\n    type: CLEAN_DISH_LIST\n  };\n}\nexport var mapRetrievedDishArray = function mapRetrievedDishArray(dishList) {\n  return dishList.map(function (dish) {\n    return _objectSpread({}, dish, {\n      selectedSize: dish.sizes && dish.sizes.length ? dish.sizes[0].id : null,\n      uuid: uuid()\n    });\n  });\n};\nexport var getInitialOrder = function getInitialOrder() {\n  var initialOrder = HelperService.getFromStorage(window.localStorage, 'order');\n\n  if (initialOrder !== null) {\n    return initialOrder.data;\n  }\n\n  return [];\n};\nexport var setOrderInStorage = function setOrderInStorage(order) {\n  HelperService.setInStorage(window.localStorage, 'order', order);\n};\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(resource, \"resource\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(PUBLISH_DISH_REQUEST, \"PUBLISH_DISH_REQUEST\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(PUBLISH_DISH_SUCCESS, \"PUBLISH_DISH_SUCCESS\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(PUBLISH_DISH_ERROR, \"PUBLISH_DISH_ERROR\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(UNPUBLISH_DISH_REQUEST, \"UNPUBLISH_DISH_REQUEST\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(UNPUBLISH_DISH_SUCCESS, \"UNPUBLISH_DISH_SUCCESS\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(UNPUBLISH_DISH_ERROR, \"UNPUBLISH_DISH_ERROR\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(SET_DISH_FILTERS, \"SET_DISH_FILTERS\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(SET_DISH_PAGE, \"SET_DISH_PAGE\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(ADD_DISH_IN_ORDER, \"ADD_DISH_IN_ORDER\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(REMOVE_DISH_FROM_ORDER, \"REMOVE_DISH_FROM_ORDER\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(SET_DISH_EXTRA_IN_ORDER, \"SET_DISH_EXTRA_IN_ORDER\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(REMOVE_DISH_EXTRA_IN_ORDER, \"REMOVE_DISH_EXTRA_IN_ORDER\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(SET_DISH_SIZE_IN_ORDER, \"SET_DISH_SIZE_IN_ORDER\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(SET_RESTAURANT_LINK, \"SET_RESTAURANT_LINK\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(CREAN_DISH_ORDER, \"CREAN_DISH_ORDER\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(CLEANUP_DISH, \"CLEANUP_DISH\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(CLEAN_DISH_LIST, \"CLEAN_DISH_LIST\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(GET_DISH_LIST_REQUEST, \"GET_DISH_LIST_REQUEST\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(GET_DISH_LIST_SUCCESS, \"GET_DISH_LIST_SUCCESS\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(GET_DISH_LIST_ERROR, \"GET_DISH_LIST_ERROR\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(CREATE_DISH_REQUEST, \"CREATE_DISH_REQUEST\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(CREATE_DISH_SUCCESS, \"CREATE_DISH_SUCCESS\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(CREATE_DISH_ERROR, \"CREATE_DISH_ERROR\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(GET_DISH_BY_ID_REQUEST, \"GET_DISH_BY_ID_REQUEST\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(GET_DISH_BY_ID_SUCCESS, \"GET_DISH_BY_ID_SUCCESS\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(GET_DISH_BY_ID_ERROR, \"GET_DISH_BY_ID_ERROR\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(UPDATE_DISH_REQUEST, \"UPDATE_DISH_REQUEST\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(UPDATE_DISH_SUCCESS, \"UPDATE_DISH_SUCCESS\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(UPDATE_DISH_ERROR, \"UPDATE_DISH_ERROR\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(DELETE_DISH_REQUEST, \"DELETE_DISH_REQUEST\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(DELETE_DISH_SUCCESS, \"DELETE_DISH_SUCCESS\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(DELETE_DISH_ERROR, \"DELETE_DISH_ERROR\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(getInitialState, \"getInitialState\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(reducer, \"reducer\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(_addDishInOrder, \"_addDishInOrder\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(_removeDishFromOrder, \"_removeDishFromOrder\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(_setDishExtra, \"_setDishExtra\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(_removeDishExtra, \"_removeDishExtra\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(_setDishSize, \"_setDishSize\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(_setDishSizeInList, \"_setDishSizeInList\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(setRestaurantLink, \"setRestaurantLink\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(cleanOrder, \"cleanOrder\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(cleanDishes, \"cleanDishes\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(mapRetrievedDishArray, \"mapRetrievedDishArray\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(getInitialOrder, \"getInitialOrder\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  reactHotLoader.register(setOrderInStorage, \"setOrderInStorage\", \"/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js\");\n  leaveModule(module);\n})();\n\n;","map":{"version":3,"sources":["/home/vladimir/workspace/bestonlinemenus-front.loc/src/scenes/Menu/modules/menu.dishes.modules.js"],"names":["ReduxCrudService","HelperService","uuid","GET_RESTAURANTS_BY_ID_REQUEST","GET_RESTAURANTS_BY_ID_SUCCESS","GET_RESTAURANTS_BY_ID_ERROR","resource","PUBLISH_DISH_REQUEST","PUBLISH_DISH_SUCCESS","PUBLISH_DISH_ERROR","UNPUBLISH_DISH_REQUEST","UNPUBLISH_DISH_SUCCESS","UNPUBLISH_DISH_ERROR","SET_DISH_FILTERS","SET_DISH_PAGE","ADD_DISH_IN_ORDER","REMOVE_DISH_FROM_ORDER","SET_DISH_EXTRA_IN_ORDER","REMOVE_DISH_EXTRA_IN_ORDER","SET_DISH_SIZE_IN_ORDER","SET_RESTAURANT_LINK","CREAN_DISH_ORDER","CLEANUP_DISH","CLEAN_DISH_LIST","getActionCrudTypes","GET","GET_DISH_LIST_REQUEST","GET_DISH_LIST_SUCCESS","GET_DISH_LIST_ERROR","POST","CREATE_DISH_REQUEST","CREATE_DISH_SUCCESS","CREATE_DISH_ERROR","GET_BY_ID","GET_DISH_BY_ID_REQUEST","GET_DISH_BY_ID_SUCCESS","GET_DISH_BY_ID_ERROR","PATCH","UPDATE_DISH_REQUEST","UPDATE_DISH_SUCCESS","UPDATE_DISH_ERROR","DELETE","DELETE_DISH_REQUEST","DELETE_DISH_SUCCESS","DELETE_DISH_ERROR","getInitialState","loading","restaurantLoading","error","filters","category_id","page","limit","data","order","getInitialOrder","restaurant","page_info","link","count","reducer","name","state","action","type","Number","response","mapRetrievedDishArray","restaurant_id","id","_addDishInOrder","setOrderInStorage","_setDishExtra","_removeDishExtra","_setDishSizeInList","_setDishSize","_removeDishFromOrder","getFromStorage","window","localStorage","dish","find","selectedExtras","selectedSize","filter","index","findIndex","d","dishIndex","dishUUID","newDish","concat","extraId","map","sizeId","setRestaurantLink","cleanOrder","cleanDishes","dishList","sizes","length","initialOrder","setInStorage"],"mappings":"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","sourcesContent":["import { ReduxCrudService } from '/services';\nimport { HelperService } from '/services';\nimport uuid from 'uuid/v4';\n\nimport {\n    GET_RESTAURANTS_BY_ID_REQUEST,\n    GET_RESTAURANTS_BY_ID_SUCCESS,\n    GET_RESTAURANTS_BY_ID_ERROR\n} from '/scenes/Restaurants/modules/restaurants.modules';\n\nexport const resource = '/dish';\n\nexport const PUBLISH_DISH_REQUEST = `${resource}/publish/request`;\nexport const PUBLISH_DISH_SUCCESS = `${resource}/publish/success`;\nexport const PUBLISH_DISH_ERROR = `${resource}/publish/error`;\n\nexport const UNPUBLISH_DISH_REQUEST = `${resource}/unpublish/request`;\nexport const UNPUBLISH_DISH_SUCCESS = `${resource}/unpublish/success`;\nexport const UNPUBLISH_DISH_ERROR = `${resource}/unpublish/error`;\n\nexport const SET_DISH_FILTERS = `${resource}/filters/changed`;\nexport const SET_DISH_PAGE = `${resource}/filters/set-page`;\n\nexport const ADD_DISH_IN_ORDER = `${resource}/orded/add`;\nexport const REMOVE_DISH_FROM_ORDER = `${resource}/order/remove`;\nexport const SET_DISH_EXTRA_IN_ORDER = `${resource}/order/set-extra`;\nexport const REMOVE_DISH_EXTRA_IN_ORDER = `${resource}/order/remove-extra`;\nexport const SET_DISH_SIZE_IN_ORDER = `${resource}/order/set-size`;\nexport const SET_RESTAURANT_LINK = 'set-restaurant-link';\nexport const CREAN_DISH_ORDER = `${resource}/order/clean`;\n\nexport const CLEANUP_DISH = `${resource}/creanup`;\nexport const CLEAN_DISH_LIST = `${resource}/list/clean`;\n\nexport const {\n    GET: [GET_DISH_LIST_REQUEST, GET_DISH_LIST_SUCCESS, GET_DISH_LIST_ERROR],\n    POST: [CREATE_DISH_REQUEST, CREATE_DISH_SUCCESS, CREATE_DISH_ERROR],\n    GET_BY_ID: [\n        GET_DISH_BY_ID_REQUEST,\n        GET_DISH_BY_ID_SUCCESS,\n        GET_DISH_BY_ID_ERROR\n    ],\n    PATCH: [UPDATE_DISH_REQUEST, UPDATE_DISH_SUCCESS, UPDATE_DISH_ERROR],\n    DELETE: [DELETE_DISH_REQUEST, DELETE_DISH_SUCCESS, DELETE_DISH_ERROR]\n} = ReduxCrudService.getActionCrudTypes(resource);\n\nconst getInitialState = () => ({\n    loading: false,\n    restaurantLoading: false,\n    error: null,\n    filters: {\n        category_id: '',\n        page: 1,\n        limit: 10\n    },\n    data: [],\n    order: getInitialOrder(),\n    restaurant: {\n        page_info: {}\n    },\n    link: null,\n    count: null\n});\n\nexport const reducer = {\n    name: resource,\n    [resource]: function(state = getInitialState(), action = {}) {\n        switch (action.type) {\n            case GET_DISH_LIST_REQUEST:\n            case DELETE_DISH_REQUEST:\n                return {\n                    ...state,\n                    loading: true\n                };\n            case GET_DISH_LIST_SUCCESS:\n                return {\n                    ...state,\n                    count: Number(action.response.count),\n                    data: [\n                        ...state.data,\n                        ...mapRetrievedDishArray(action.response.data)\n                    ],\n                    loading: false\n                };\n\n            case SET_DISH_FILTERS:\n                return {\n                    ...state,\n                    data: [],\n                    filters: {\n                        page: 1,\n                        ...state.filters,\n                        ...action.filters\n                    }\n                };\n\n            case CLEANUP_DISH: {\n                return getInitialState();\n            }\n\n            case ADD_DISH_IN_ORDER: {\n                const order = {\n                    restaurant_id: state.restaurant.id,\n                    data: [...state.order, _addDishInOrder({ state, action })]\n                };\n\n                setOrderInStorage(order);\n\n                return {\n                    ...state,\n                    order: order.data\n                };\n            }\n\n            case SET_DISH_EXTRA_IN_ORDER: {\n                const order = {\n                    restaurant_id: state.restaurant.id,\n                    data: _setDishExtra({ state, action })\n                };\n\n                setOrderInStorage(order);\n\n                return {\n                    ...state,\n                    order: order.data\n                };\n            }\n\n            case CREAN_DISH_ORDER: {\n                setOrderInStorage({ restaurant_id: null, data: [] });\n\n                return {\n                    ...state,\n                    order: []\n                };\n            }\n\n            case CLEAN_DISH_LIST: {\n                return {\n                    ...state,\n                    filters: {\n                        category_id: '',\n                        page: 1,\n                        limit: 10\n                    },\n                    data: []\n                };\n            }\n\n            case REMOVE_DISH_EXTRA_IN_ORDER: {\n                const order = {\n                    restaurant_id: state.restaurant.id,\n                    data: _removeDishExtra({ state, action })\n                };\n                setOrderInStorage(order);\n\n                return {\n                    ...state,\n                    order: order.data\n                };\n            }\n\n            case SET_RESTAURANT_LINK: {\n                return {\n                    ...state,\n                    link: action.link\n                };\n            }\n\n            case SET_DISH_SIZE_IN_ORDER: {\n                return {\n                    ...state,\n                    data: _setDishSizeInList({ state, action }),\n                    order: _setDishSize({ state, action })\n                };\n            }\n\n            case REMOVE_DISH_FROM_ORDER: {\n                const order = {\n                    restaurant_id: state.restaurant.id,\n                    data: _removeDishFromOrder({ state, action })\n                };\n                setOrderInStorage(order);\n\n                return {\n                    ...state,\n                    order: order.data,\n                };\n            }\n\n            case GET_RESTAURANTS_BY_ID_REQUEST: {\n                return {\n                    ...state,\n                    restaurantLoading: true\n                };\n            }\n\n            case GET_RESTAURANTS_BY_ID_SUCCESS: {\n                const order = HelperService.getFromStorage(\n                    window.localStorage,\n                    'order'\n                );\n\n                return {\n                    ...state,\n                    restaurant: action.response,\n                    order:\n                        order && order.restaurant_id !== action.response.id\n                            ? []\n                            : state.order,\n                    restaurantLoading: false\n                };\n            }\n\n            case GET_RESTAURANTS_BY_ID_ERROR: {\n                return {\n                    ...state,\n                    restaurantLoading: false,\n                    error: action.response\n                };\n            }\n\n            case SET_DISH_PAGE: {\n                return {\n                    ...state,\n                    filters: {\n                        ...state.filters,\n                        page: action.page\n                    }\n                };\n            }\n            case GET_DISH_LIST_ERROR:\n                return {\n                    ...state,\n                    error: action.error,\n                    loading: false\n                };\n            case DELETE_DISH_SUCCESS:\n            case DELETE_DISH_ERROR: {\n                return {\n                    ...state,\n                    loading: false\n                };\n            }\n            default:\n                return state;\n        }\n    }\n};\n\n\nfunction _addDishInOrder({ state, action }) {\n    const dish = { ...state.data.find(dish => dish.id === action.id) };\n\n    dish.uuid = uuid();\n    dish.selectedExtras = [];\n    dish.selectedSize = dish.selectedSize || null;\n\n    return dish;\n}\n\nfunction _removeDishFromOrder({ state, action }) {\n    return state.order.filter((dish, index) => {\n        return (\n            dish.id !== action.id ||\n            index !== state.order.findIndex(d => d.id === dish.id)\n        );\n    });\n}\n\nfunction _setDishExtra({ state, action }) {\n    const dishIndex = state.order.findIndex(\n        dish => dish.uuid === action.dishUUID\n    );\n    const newDish = { ...state.order[dishIndex] };\n\n    newDish.selectedExtras = newDish.selectedExtras.concat(action.extraId);\n    return state.order.map((dish, index) =>\n        dishIndex === index ? newDish : dish\n    );\n}\n\nfunction _removeDishExtra({ state, action }) {\n    const dishIndex = state.order.findIndex(\n        dish => dish.uuid === action.dishUUID\n    );\n    const newDish = { ...state.order[dishIndex] };\n\n    newDish.selectedExtras = newDish.selectedExtras.filter(\n        extraId => extraId !== action.extraId\n    );\n    return state.order.map((dish, index) =>\n        dishIndex === index ? newDish : dish\n    );\n}\n\nfunction _setDishSize({ state, action }) {\n    const dishIndex = state.order.findIndex(\n        dish => dish.uuid === action.dishUUID\n    );\n    const newDish = { ...state.order[dishIndex] };\n\n    newDish.selectedSize = action.sizeId;\n    return state.order.map((dish, index) =>\n        dishIndex === index ? newDish : dish\n    );\n}\n\nfunction _setDishSizeInList({ state, action }) {\n    const dishIndex = state.data.findIndex(\n        dish => dish.uuid === action.dishUUID\n    );\n    const newDish = { ...state.data[dishIndex] };\n\n    newDish.selectedSize = action.sizeId;\n    return state.data.map((dish, index) =>\n        dishIndex === index ? newDish : dish\n    );\n}\n\nexport function setRestaurantLink(link) {\n    return {\n        type: SET_RESTAURANT_LINK,\n        link\n    };\n}\n\nexport function cleanOrder() {\n    return {\n        type: CREAN_DISH_ORDER\n    };\n}\n\nexport function cleanDishes() {\n    return {\n        type: CLEAN_DISH_LIST\n    };\n}\n\nexport const mapRetrievedDishArray = dishList =>\n    dishList.map(dish => ({\n        ...dish,\n        selectedSize: dish.sizes && dish.sizes.length ? dish.sizes[0].id : null,\n        uuid: uuid()\n    }));\n\nexport const getInitialOrder = () => {\n    const initialOrder = HelperService.getFromStorage(\n        window.localStorage,\n        'order'\n    );\n\n    if (initialOrder !== null) {\n        return initialOrder.data;\n    }\n\n    return [];\n};\n\nexport const setOrderInStorage = order => {\n    HelperService.setInStorage(window.localStorage, 'order', order);\n};\n"]},"metadata":{},"sourceType":"module"}